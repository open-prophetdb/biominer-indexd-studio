"use strict";(self.webpackChunkbiominer_indexd_studio=self.webpackChunkbiominer_indexd_studio||[]).push([[119],{119:function(ze,se,r){r.r(se),r.d(se,{default:function(){return Ve}});var oe=r(9783),J=r.n(oe),z=r(19632),M=r.n(z),ce=r(97857),o=r.n(ce),le=r(5574),D=r.n(le),R=r(67294),pe=r(3003),he=r(74330),je=r(38437),De=r(83622),re=r(32983),_e=r(71230),X=r(15746),Y=r(4393),ae=r(53531),G=r(66309),me=r(40411),n=r(42075),s=r(31530),_=r(78045),v=r(84567),W=r(82494),c=r(26410),a=r(26412),w=r(43471),F=r(13520),C=r(55355),q=r(10524),ue=r(21056),Z=r(15360),l=r(48869),H=r(61086),P=r(15611),j=r(58660),T=r(83170),e=r(85893),p=function(g,y){if(g===void 0&&y===void 0)return 0;if(g===void 0)return-1;if(y===void 0)return 1;var k=String(g),x=String(y),L=/^(\d+)\.(\d+)\.(\d+)/,B=k.match(L),$=x.match(L);if(B&&$){for(var b=1;b<=3;b++){var ee=parseInt(B[b])-parseInt($[b]);if(ee!==0)return ee}return 0}var N=parseFloat(k),K=parseFloat(x);return!isNaN(N)&&!isNaN(K)?N-K:k.localeCompare(x)},de=function(g,y){var k,x=g==null?void 0:g.find(function(L){return L==null?void 0:L.toLowerCase().startsWith(y.toLowerCase())});return x?((k=x.split(":")[1])===null||k===void 0?void 0:k.trim())||"Unknown":y==="org:"?"org:Unassigned":"Unknown"},Re=function(g){if(!g||g.trim()==="")return!1;var y=g.toLowerCase();return y!=="unknown"&&y!=="n/a"},ke=function(g){return!!(g.pmid||g.citation)},Le=function(g){var y,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,x=new Map,L=new Map,B=new Map;g.forEach(function(t,i){var h=t.key;if(h){L.set(h,(L.get(h)||0)+1);var S=x.get(h);if(!S)x.set(h,t);else{var U=p(t.version,S.version);(U>0||U===0&&i>g.indexOf(S))&&x.set(h,t)}B.set(t.key,t)}});var $=Array.from(x.values()),b={dataset_count_entries:g.length,dataset_count_unique_keys:x.size,sample_total:0,disease_count:0,organ_count:0,org_count:0,public_count:0,with_pub_count:0,with_pub_ratio:0,with_license_count:0,with_license_ratio:0,filebased_count:0,non_filebased_count:0},ee=new Map,N=new Map,K=new Map,E=new Map,A=new Map,V=[],O={completeness:{pmid_present_ratio:0,license_present_ratio:0,disease_present_ratio:0,organ_present_ratio:0,org_present_ratio:0},unknown_share:{org_unassigned_ratio:0,license_unknown_ratio:0},total_anomalies:{total_missing_count:0,total_zero_count:0,total_outlier_count:0},duplicate_keys:[]};$.forEach(function(t){var i,h=t.total||0;b.sample_total+=h,t.total===void 0||t.total===null?O.total_anomalies.total_missing_count++:h===0?O.total_anomalies.total_zero_count++:V.push(h);var S=de(t.tags||[],"disease:");if(S!=="Unknown"){var U=ee.get(S)||{datasets:0,samples:0};ee.set(S,{datasets:U.datasets+1,samples:U.samples+h}),O.completeness.disease_present_ratio++}var Q=de(t.tags||[],"organ:");if(Q!=="Unknown"){var Ze=N.get(Q)||{datasets:0,samples:0};N.set(Q,{datasets:Ze.datasets+1,samples:Ze.samples+h}),O.completeness.organ_present_ratio++}var d=de(t.tags||[],"org:"),m=K.get(d)||{datasets:0,samples:0};K.set(d,{datasets:m.datasets+1,samples:m.samples+h}),d!=="org:Unassigned"&&O.completeness.org_present_ratio++,A.has(S)||A.set(S,new Map);var u=A.get(S),f=u.get(Q)||{datasets:0,samples:0};u.set(Q,{datasets:f.datasets+1,samples:f.samples+h}),(i=t.groups)===null||i===void 0||i.forEach(function(ne){E.set(ne,(E.get(ne)||0)+1),ne==="PUBLIC"&&b.public_count++}),ke(t)&&(b.with_pub_count++,O.completeness.pmid_present_ratio++),Re(t.license)?(b.with_license_count++,O.completeness.license_present_ratio++):t.license&&O.unknown_share.license_unknown_ratio++,t.is_filebased!==void 0&&(t.is_filebased?b.filebased_count++:b.non_filebased_count++),B.set(t.key,t)});var te=$.length||1;b.with_pub_ratio=b.with_pub_count/te,b.with_license_ratio=b.with_license_count/te,O.completeness.pmid_present_ratio/=te,O.completeness.license_present_ratio/=te,O.completeness.disease_present_ratio/=te,O.completeness.organ_present_ratio/=te,O.completeness.org_present_ratio/=te;var I=((y=K.get("org:Unassigned"))===null||y===void 0?void 0:y.datasets)||0;if(O.unknown_share.org_unassigned_ratio=I/te,O.unknown_share.license_unknown_ratio/=te,V.length>0){V.sort(function(t,i){return t-i});var ie=V[Math.floor(V.length*.99)];$.forEach(function(t){(t.total||0)>ie&&O.total_anomalies.total_outlier_count++})}L.forEach(function(t,i){t>1&&O.duplicate_keys.push({key:i,versionCount:t})}),b.disease_count=ee.size,b.organ_count=N.size,b.org_count=Array.from(K.keys()).filter(function(t){return t!=="org:Unassigned"&&t!=="Unknown"}).length;var Be=Array.from(ee.entries()).map(function(t){var i=D()(t,2),h=i[0],S=i[1];return o()({name:h},S)}).sort(function(t,i){return i.datasets-t.datasets}).slice(0,k),Ee=Array.from(N.entries()).map(function(t){var i=D()(t,2),h=i[0],S=i[1];return o()({name:h},S)}).sort(function(t,i){return i.datasets-t.datasets}).slice(0,k),we=Array.from(K.entries()).filter(function(t){var i=D()(t,1),h=i[0];return h!=="org:Unassigned"}).map(function(t){var i=D()(t,2),h=i[0],S=i[1];return o()({name:h},S)}).sort(function(t,i){return i.datasets-t.datasets}).slice(0,k),Ie=Array.from(E.entries()).map(function(t){var i=D()(t,2),h=i[0],S=i[1];return{name:h,datasets:S}}).sort(function(t,i){return i.datasets-t.datasets}).slice(0,k),He=Array.from(L.entries()).filter(function(t){var i=D()(t,2),h=i[0],S=i[1];return S>1}).map(function(t){var i=D()(t,2),h=i[0],S=i[1];return{key:h,versions:S}}).sort(function(t,i){return i.versions-t.versions}).slice(0,k),Ce=Array.from(new Set(Array.from(A.keys()))),ge=Array.from(new Set(Array.from(A.values()).flatMap(function(t){return Array.from(t.keys())}))),Me=[],Pe=[];Ce.forEach(function(t){var i=[],h=[];ge.forEach(function(S){var U,Q=(U=A.get(t))===null||U===void 0?void 0:U.get(S);i.push((Q==null?void 0:Q.datasets)||0),h.push((Q==null?void 0:Q.samples)||0)}),Me.push(i),Pe.push(h)});var Se=$.filter(function(t){return(t.total||0)>0}).sort(function(t,i){return(i.total||0)-(t.total||0)}),fe=Se.slice(0,k).map(function(t){return{key:t.key,name:t.name,total:t.total||0}}),ye=Se.filter(ke).slice(0,k).map(function(t){return{key:t.key,name:t.name,total:t.total||0,pmid:t.pmid}}),Ae=V.length>0?V[Math.floor(V.length/2)]:0,Oe=$.filter(function(t){return ke(t)&&Re(t.license)&&(t.total||0)>=Ae}).sort(function(t,i){return(i.total||0)-(t.total||0)}).slice(0,k).map(function(t){return{key:t.key,name:t.name,total:t.total||0,pmid:t.pmid,license:t.license}});return{kpi:b,distributions:{disease_distribution:Be,organ_distribution:Ee,org_distribution:we,group_distribution:Ie,version_span:He},matrix:{disease_organ_matrix:{diseases:Ce,organs:ge,values:Me,valuesSamples:Pe}},quality:O,discovery:{top_datasets_by_samples:fe,top_datasets_with_pub:ye,high_quality_boards:Oe},datasets:B}},Te=600,Ue=function(g){var y=g.data,k=g.type,x=g.sortBy,L=g.viewMode,B=M()(y).sort(function(E,A){return A[x]-E[x]});if(L==="table"){var $=[{title:"Name",dataIndex:"name",key:"name"},{title:"Datasets",dataIndex:"datasets",key:"datasets",sorter:function(A,V){return A.datasets-V.datasets}},{title:"Samples",dataIndex:"samples",key:"samples",sorter:function(A,V){return A.samples-V.samples}}];return(0,e.jsx)(pe.Z,{dataSource:B,columns:$,pagination:{pageSize:10},size:"small",rowKey:"name"})}if(k==="pie"){var b=[{type:"pie",labels:B.map(function(E){return E.name}),values:B.map(function(E){return E[x]}),textinfo:"label+percent",textposition:"outside",hole:.4,marker:{colors:["#1890ff","#52c41a","#faad14","#f5222d","#722ed1","#13c2c2","#eb2f96","#fa8c16"]}}],ee={title:"".concat(x==="datasets"?"Number of Datasets":"Number of Samples"," Distribution"),height:Te,width:void 0,showlegend:!0,legend:{orientation:"v",x:1.1,y:.5},autosize:!0,showgrid:!1};return(0,e.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,e.jsx)(j.Z,{data:b,layout:ee,config:{displayModeBar:!0,responsive:!0},style:{width:"100%",height:"100%"},useResizeHandler:!0})})}var N=[{type:"bar",x:B.map(function(E){return E.name}),y:B.map(function(E){return E[x]}),marker:{color:"#1890ff",opacity:.8},text:B.map(function(E){return E[x]}),textposition:"auto",hovertemplate:"<b>%{x}</b><br>".concat(x==="datasets"?"Datasets":"Samples",": %{y}<extra></extra>")}],K={title:"".concat(x==="datasets"?"Number of Datasets":"Number of Samples"," Distribution"),xaxis:{title:"Name",tickangle:-45,tickmode:"array",ticktext:B.map(function(E){return E.name}),tickvals:B.map(function(E,A){return A})},yaxis:{title:x==="datasets"?"Number of Datasets":"Number of Samples",titlefont:{size:14}},height:Te,width:void 0,margin:{l:80,r:50,t:80,b:240},autosize:!0,showlegend:!1,showgrid:!1};return(0,e.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,e.jsx)(j.Z,{data:N,layout:K,config:{displayModeBar:!0,responsive:!0},style:{width:"100%",height:"100%"},useResizeHandler:!0})})},Ke=function(g){var y=g.matrix,k=g.type,x,L,B,$,b;if(k==="disease-organ")x=[{type:"heatmap",z:y.values,x:y.organs,y:y.diseases,colorscale:"Blues",showscale:!0,hovertemplate:"<b>Disease:</b> %{y}<br><b>Organ:</b> %{x}<br><b>Datasets:</b> %{z}<extra></extra>",colorbar:{title:"Number of Datasets",titleside:"right"}}],B="Disease-Organ Matrix Heatmap",$="Organ",b="Disease";else if(k==="org-disease"){var ee=new Map,N=Array.from(new Set(y.orgs||[])).map(function(I){return String(I)}),K=Array.from(new Set(y.diseases||[])).map(function(I){return String(I)});N.forEach(function(I){ee.set(I,new Map),K.forEach(function(ie){ee.get(I).set(ie,0)})});var E=N.map(function(I){return K.map(function(ie){return Math.floor(Math.random()*10)})});x=[{type:"heatmap",z:E,x:K,y:N,colorscale:"Greens",showscale:!0,hovertemplate:"<b>Organization:</b> %{y}<br><b>Disease:</b> %{x}<br><b>Datasets:</b> %{z}<extra></extra>",colorbar:{title:"Number of Datasets",titleside:"right"}}],B="Organization-Disease Matrix Heatmap",$="Disease",b="Organization"}else if(k==="org-organ"){var A=new Map,V=Array.from(new Set(y.orgs||[])).map(function(I){return String(I)}),O=Array.from(new Set(y.organs||[])).map(function(I){return String(I)});V.forEach(function(I){A.set(I,new Map),O.forEach(function(ie){A.get(I).set(ie,0)})});var te=V.map(function(I){return O.map(function(ie){return Math.floor(Math.random()*10)})});x=[{type:"heatmap",z:te,x:O,y:V,colorscale:"Reds",showscale:!0,hovertemplate:"<b>Organization:</b> %{y}<br><b>Organ:</b> %{x}<br><b>Datasets:</b> %{z}<extra></extra>",colorbar:{title:"Number of Datasets",titleside:"right"}}],B="Organization-Organ Matrix Heatmap",$="Organ",b="Organization"}return L={title:B,xaxis:{title:$,tickangle:-45,side:"bottom"},yaxis:{title:b,side:"left"},height:Te,width:void 0,margin:{l:100,r:50,t:80,b:240},autosize:!0,showlegend:!1,showgrid:!1},_jsx("div",{style:{width:"100%",height:"100%"},children:_jsx(Plot,{data:x,layout:L,config:{displayModeBar:!0,responsive:!0},style:{width:"100%",height:"100%"},useResizeHandler:!0})})},Ne=function(g){var y=g.data,k=g.topN,x=k===void 0?10:k,L=g.debug,B=L===void 0?!1:L,$=(0,R.useState)(!y),b=D()($,2),ee=b[0],N=b[1],K=(0,R.useState)(null),E=D()(K,2),A=E[0],V=E[1],O=(0,R.useState)([]),te=D()(O,2),I=te[0],ie=te[1],Be=(0,R.useState)(x),Ee=D()(Be,2),we=Ee[0],Ie=Ee[1],He=(0,R.useState)("datasets"),Ce=D()(He,2),ge=Ce[0],Me=Ce[1],Pe=(0,R.useState)({disease:"pie",organ:"pie",org:"pie"}),Se=D()(Pe,2),fe=Se[0],ye=Se[1],Ae=(0,R.useState)({disease:"chart",organ:"chart",org:"chart"}),Oe=D()(Ae,2),t=Oe[0],i=Oe[1],h=(0,R.useState)({diseases:[],organs:[],orgs:[],groups:[],onlyPublic:!1,onlyWithPub:!1,onlyWithLicense:!1}),S=D()(h,2),U=S[0],Q=S[1];(0,R.useEffect)(function(){if(y){var m=Array.isArray(y)?y:[y];ie(m),N(!1)}else{N(!0);var u="statistics_datasets_cache",f="statistics_datasets_cache_time",ne=localStorage.getItem(u),xe=localStorage.getItem(f),We=Date.now(),Fe=24*60*60*1e3;if(ne&&xe&&We-parseInt(xe)<Fe)try{var $e=JSON.parse(ne);ie($e),N(!1);return}catch(be){console.warn("Failed to parse cached data:",be),localStorage.removeItem(u),localStorage.removeItem(f)}setTimeout(function(){(0,T.getDatasets)({page:1,page_size:1e4}).then(function(be){ie(be.records);try{localStorage.setItem(u,JSON.stringify(be.records)),localStorage.setItem(f,We.toString())}catch(Ge){console.warn("Failed to cache data to localStorage:",Ge)}}).catch(function(be){V(be.message)}).finally(function(){N(!1)})},1e3)}},[y]);var Ze=(0,R.useMemo)(function(){var m=M()(I);return U.onlyPublic&&(m=m.filter(function(u){var f;return(f=u.groups)===null||f===void 0?void 0:f.includes("PUBLIC")})),U.onlyWithPub&&(m=m.filter(ke)),U.onlyWithLicense&&(m=m.filter(function(u){return Re(u.license)})),U.diseases.length>0&&(m=m.filter(function(u){var f=de(u.tags||[],"disease:");return U.diseases.includes(f)})),m},[I,U]),d=(0,R.useMemo)(function(){return Le(Ze,we)},[Ze,we]);return(0,R.useEffect)(function(){var m=function(f,ne){f.length<=20?ye(function(xe){return o()(o()({},xe),{},J()({},ne,"pie"))}):ye(function(xe){return o()(o()({},xe),{},J()({},ne,"bar"))})};m(d.distributions.disease_distribution,"disease"),m(d.distributions.organ_distribution,"organ"),m(d.distributions.org_distribution,"org")},[d.distributions]),ee?(0,e.jsx)("div",{style:{textAlign:"center",padding:"50px"},children:(0,e.jsx)(he.Z,{size:"large",tip:"Loading data..."})}):A?(0,e.jsx)(je.Z,{message:"Data loading failed",description:A,type:"error",showIcon:!0,action:(0,e.jsxs)(De.ZP,{size:"small",danger:!0,onClick:function(){return window.location.reload()},children:[(0,e.jsx)(w.Z,{})," Retry"]})}):I.length===0?(0,e.jsx)(re.Z,{description:"No data available"}):(0,e.jsxs)("div",{style:{padding:"0px",display:"flex",flexDirection:"column"},className:"statistics-page",children:[(0,e.jsxs)(_e.Z,{gutter:[16,16],style:{marginBottom:"10px",flexShrink:0},children:[(0,e.jsx)(X.Z,{xs:12,sm:12,md:8,lg:4,children:(0,e.jsx)(Y.Z,{children:(0,e.jsx)(ae.Z,{title:"Total Entries",value:d.kpi.dataset_count_entries,prefix:(0,e.jsx)(F.Z,{})})})}),(0,e.jsx)(X.Z,{xs:12,sm:12,md:8,lg:4,children:(0,e.jsx)(Y.Z,{children:(0,e.jsx)(ae.Z,{title:"Unique Datasets",value:d.kpi.dataset_count_unique_keys,prefix:(0,e.jsx)(F.Z,{}),suffix:(0,e.jsx)(G.Z,{color:"blue",children:"Deduplicated"})})})}),(0,e.jsx)(X.Z,{xs:12,sm:12,md:8,lg:4,children:(0,e.jsx)(Y.Z,{children:(0,e.jsx)(ae.Z,{title:"Total Samples",value:d.kpi.sample_total,prefix:(0,e.jsx)(C.Z,{})})})}),(0,e.jsx)(X.Z,{xs:12,sm:12,md:8,lg:4,children:(0,e.jsx)(Y.Z,{children:(0,e.jsx)(ae.Z,{title:"Public Datasets",value:d.kpi.public_count,prefix:(0,e.jsx)(q.Z,{}),suffix:(0,e.jsx)(me.Z,{status:"success"})})})}),(0,e.jsx)(X.Z,{xs:12,sm:12,md:8,lg:4,children:(0,e.jsx)(Y.Z,{children:(0,e.jsx)(ae.Z,{title:"Disease Count",value:d.kpi.disease_count,prefix:(0,e.jsx)(ue.Z,{})})})}),(0,e.jsx)(X.Z,{xs:12,sm:12,md:8,lg:4,children:(0,e.jsx)(Y.Z,{children:(0,e.jsx)(ae.Z,{title:"With Publications",value:d.kpi.with_pub_count,prefix:(0,e.jsx)(Z.Z,{}),suffix:(0,e.jsxs)(G.Z,{color:"green",children:[(d.kpi.with_pub_ratio*100).toFixed(1),"%"]})})})})]}),(0,e.jsx)(Y.Z,{style:{marginBottom:"10px",flexShrink:0},children:(0,e.jsxs)(n.Z,{wrap:!0,children:[(0,e.jsx)(G.Z,{style:{fontSize:"14px"},color:"blue",children:"TopN"}),(0,e.jsx)(s.Z,{options:[5,10,20,30,50],value:we,onChange:Ie}),(0,e.jsx)(G.Z,{style:{fontSize:"14px"},color:"red",children:"Group by"}),(0,e.jsxs)(_.ZP.Group,{value:ge,onChange:function(u){return Me(u.target.value)},children:[(0,e.jsx)(_.ZP,{value:"datasets",children:"By Datasets"}),(0,e.jsx)(_.ZP,{value:"samples",children:"By Samples"})]}),(0,e.jsx)(G.Z,{style:{fontSize:"14px"},color:"red",children:"Filter"}),(0,e.jsx)(v.Z,{checked:U.onlyPublic,onChange:function(u){return Q(o()(o()({},U),{},{onlyPublic:u.target.checked}))},children:"Public Only"}),(0,e.jsx)(v.Z,{checked:U.onlyWithPub,onChange:function(u){return Q(o()(o()({},U),{},{onlyWithPub:u.target.checked}))},children:"With Publications"}),(0,e.jsx)(v.Z,{checked:U.onlyWithLicense,onChange:function(u){return Q(o()(o()({},U),{},{onlyWithLicense:u.target.checked}))},children:"With License"})]})}),(0,e.jsxs)(_e.Z,{gutter:[16,16],style:{minHeight:0},children:[(0,e.jsx)(X.Z,{xs:24,sm:24,md:24,lg:14,xl:14,style:{height:"100%"},children:(0,e.jsx)(Y.Z,{style:{height:"100%",display:"flex",flexDirection:"column"},styles:{body:{height:"100%",padding:"8px 16px"}},children:(0,e.jsx)(W.Z,{rootClassName:"left-tabs",style:{flex:1,display:"flex",flexDirection:"column",height:"100%"},items:[{key:"organ",label:"Organ Distribution (".concat(d.kpi.organ_count,")"),children:(0,e.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,e.jsxs)("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[(0,e.jsxs)(n.Z,{children:[(0,e.jsx)("span",{children:"Chart Type:"}),(0,e.jsx)(s.Z,{options:[{label:(0,e.jsx)(l.Z,{}),value:"pie"},{label:(0,e.jsx)(H.Z,{}),value:"bar"}],value:fe.organ,onChange:function(u){return ye(function(f){return o()(o()({},f),{},{organ:u})})}})]}),(0,e.jsxs)(n.Z,{children:[(0,e.jsx)("span",{children:"View Mode:"}),(0,e.jsx)(s.Z,{options:[{label:(0,e.jsx)(l.Z,{}),value:"chart"},{label:(0,e.jsx)(P.Z,{}),value:"table"}],value:t.organ,onChange:function(u){return i(function(f){return o()(o()({},f),{},{organ:u})})}})]})]}),(0,e.jsx)("div",{style:{flex:1,minHeight:0},children:(0,e.jsx)(Ue,{data:d.distributions.organ_distribution,type:fe.organ,sortBy:ge,viewMode:t.organ})})]})},{key:"disease",label:"Disease Distribution (".concat(d.kpi.disease_count,")"),children:(0,e.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,e.jsxs)("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[(0,e.jsxs)(n.Z,{children:[(0,e.jsx)("span",{children:"Chart Type:"}),(0,e.jsx)(s.Z,{options:[{label:(0,e.jsx)(l.Z,{}),value:"pie"},{label:(0,e.jsx)(H.Z,{}),value:"bar"}],value:fe.disease,onChange:function(u){return ye(function(f){return o()(o()({},f),{},{disease:u})})}})]}),(0,e.jsxs)(n.Z,{children:[(0,e.jsx)("span",{children:"View Mode:"}),(0,e.jsx)(s.Z,{options:[{label:(0,e.jsx)(l.Z,{}),value:"chart"},{label:(0,e.jsx)(P.Z,{}),value:"table"}],value:t.disease,onChange:function(u){return i(function(f){return o()(o()({},f),{},{disease:u})})}})]})]}),(0,e.jsx)("div",{style:{flex:1,minHeight:0},children:(0,e.jsx)(Ue,{data:d.distributions.disease_distribution,type:fe.disease,sortBy:ge,viewMode:t.disease})})]})},{key:"org",label:"Organization Distribution (".concat(d.kpi.org_count,")"),children:(0,e.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,e.jsxs)("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[(0,e.jsxs)(n.Z,{children:[(0,e.jsx)("span",{children:"Chart Type:"}),(0,e.jsx)(s.Z,{options:[{label:(0,e.jsx)(l.Z,{}),value:"pie"},{label:(0,e.jsx)(H.Z,{}),value:"bar"}],value:fe.org,onChange:function(u){return ye(function(f){return o()(o()({},f),{},{org:u})})}})]}),(0,e.jsxs)(n.Z,{children:[(0,e.jsx)("span",{children:"View Mode:"}),(0,e.jsx)(s.Z,{options:[{label:(0,e.jsx)(l.Z,{}),value:"chart"},{label:(0,e.jsx)(P.Z,{}),value:"table"}],value:t.org,onChange:function(u){return i(function(f){return o()(o()({},f),{},{org:u})})}})]})]}),(0,e.jsx)("div",{style:{flex:1,minHeight:0},children:(0,e.jsx)(Ue,{data:d.distributions.org_distribution,type:fe.org,sortBy:ge,viewMode:t.org})})]})},{key:"version",label:"Version Distribution",children:(0,e.jsx)(pe.Z,{dataSource:d.distributions.version_span,columns:[{title:"Dataset Name",dataIndex:"name",key:"name",ellipsis:!0,render:function(u,f){var ne=d.datasets.get(f.key);return(0,e.jsx)("a",{href:"/datatable/".concat(f.key),target:"_blank",children:ne.name})}},{title:"Version Count",dataIndex:"versions",key:"versions",sorter:function(u,f){return u.versions-f.versions},width:150}],pagination:{pageSize:10},size:"small"})}]})})}),(0,e.jsx)(X.Z,{xs:24,sm:24,md:24,lg:10,xl:10,style:{height:"100%"},children:(0,e.jsx)(Y.Z,{title:"Data Quality & Completeness",style:{height:"100%"},styles:{body:{height:"calc(100% - 60px)",overflow:"scroll"}},children:(0,e.jsxs)(n.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{children:"Field Completeness Rate"}),(0,e.jsxs)(n.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsxs)("div",{children:["Publications: ",(0,e.jsx)(c.Z,{percent:Math.round(d.quality.completeness.pmid_present_ratio*100)})]}),(0,e.jsxs)("div",{children:["License: ",(0,e.jsx)(c.Z,{percent:Math.round(d.quality.completeness.license_present_ratio*100)})]}),(0,e.jsxs)("div",{children:["Disease Tags: ",(0,e.jsx)(c.Z,{percent:Math.round(d.quality.completeness.disease_present_ratio*100),status:"active"})]}),(0,e.jsxs)("div",{children:["Organ Tags: ",(0,e.jsx)(c.Z,{percent:Math.round(d.quality.completeness.organ_present_ratio*100),status:"active"})]}),(0,e.jsxs)("div",{children:["Organization Tags: ",(0,e.jsx)(c.Z,{percent:Math.round(d.quality.completeness.org_present_ratio*100)})]})]})]}),(0,e.jsxs)("div",{style:{marginTop:"20px"},children:[(0,e.jsx)("h4",{children:"Data Anomalies"}),(0,e.jsxs)(a.Z,{column:1,size:"small",children:[(0,e.jsx)(a.Z.Item,{label:"Missing Sample Count",children:(0,e.jsx)(G.Z,{color:"red",children:d.quality.total_anomalies.total_missing_count})}),(0,e.jsx)(a.Z.Item,{label:"Zero Sample Count",children:(0,e.jsx)(G.Z,{color:"red",children:d.quality.total_anomalies.total_zero_count})}),(0,e.jsx)(a.Z.Item,{label:"Outlier Sample Count",children:(0,e.jsx)(G.Z,{color:"yellow",children:d.quality.total_anomalies.total_outlier_count})}),(0,e.jsx)(a.Z.Item,{label:"Unassigned Organizations",children:(0,e.jsxs)(G.Z,{children:[(d.quality.unknown_share.org_unassigned_ratio*100).toFixed(1),"%"]})}),(0,e.jsx)(a.Z.Item,{label:"Unknown License",children:(0,e.jsxs)(G.Z,{children:[(d.quality.unknown_share.license_unknown_ratio*100).toFixed(1),"%"]})})]})]}),d.quality.duplicate_keys.length>0&&(0,e.jsxs)("div",{style:{marginTop:"20px"},children:[(0,e.jsx)("h4",{children:"Duplicate Keys (Top 5)"}),(0,e.jsx)(pe.Z,{dataSource:d.quality.duplicate_keys.slice(0,5),columns:[{title:"Dataset Name",dataIndex:"name",key:"name",ellipsis:!0,render:function(u,f){var ne=d.datasets.get(f.key);return(0,e.jsx)("a",{href:"/datatable/".concat(f.key),target:"_blank",children:ne.name})}},{title:"Version Count",dataIndex:"versionCount",key:"versionCount",width:150}],pagination:!1,size:"small"})]})]})})})]})]})},Ve=Ne},83170:function(ze,se,r){r.r(se),r.d(se,{fetchDatasetDataWithQueryPlan:function(){return _},getDataDictionary:function(){return n},getDatafileTables:function(){return W},getDatafiles:function(){return a},getDatasetData:function(){return G},getDatasetLicense:function(){return F},getDatasetReadme:function(){return q},getDatasets:function(){return Y}});var oe=r(13769),J=r.n(oe),z=r(15009),M=r.n(z),ce=r(97857),o=r.n(ce),le=r(99289),D=r.n(le),R=r(94272),pe=["key","version"],he=["key","version"],je=["key","version"],De=["key","version"],re=["key","version"],_e=["key","version"],X=["key","version"];function Y(Z,l){return ae.apply(this,arguments)}function ae(){return ae=D()(M()().mark(function Z(l,H){return M()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,R.request)("/api/v1/datasets",o()({method:"GET",params:o()({},l)},H||{})));case 1:case"end":return j.stop()}},Z)})),ae.apply(this,arguments)}function G(Z,l){return me.apply(this,arguments)}function me(){return me=D()(M()().mark(function Z(l,H){var P,j,T;return M()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return P=l.key,j=l.version,T=J()(l,pe),p.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(P,"/").concat(j,"/data"),o()({method:"GET",params:o()({},T)},H||{})));case 2:case"end":return p.stop()}},Z)})),me.apply(this,arguments)}function n(Z,l){return s.apply(this,arguments)}function s(){return s=D()(M()().mark(function Z(l,H){var P,j,T;return M()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return P=l.key,j=l.version,T=J()(l,he),p.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(P,"/").concat(j,"/data-dictionary"),o()({method:"GET",params:o()({},T)},H||{})));case 2:case"end":return p.stop()}},Z)})),s.apply(this,arguments)}function _(Z,l,H){return v.apply(this,arguments)}function v(){return v=D()(M()().mark(function Z(l,H,P){var j,T,e;return M()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return j=l.key,T=l.version,e=J()(l,je),de.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(j,"/").concat(T,"/data-with-query-plan"),o()({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},params:o()({},e),data:H},P||{})));case 2:case"end":return de.stop()}},Z)})),v.apply(this,arguments)}function W(Z,l){return c.apply(this,arguments)}function c(){return c=D()(M()().mark(function Z(l,H){var P,j,T;return M()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return P=l.key,j=l.version,T=J()(l,De),p.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(P,"/").concat(j,"/datafile-tables"),o()({method:"GET",params:o()({},T)},H||{})));case 2:case"end":return p.stop()}},Z)})),c.apply(this,arguments)}function a(Z,l){return w.apply(this,arguments)}function w(){return w=D()(M()().mark(function Z(l,H){var P,j,T;return M()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return P=l.key,j=l.version,T=J()(l,re),p.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(P,"/").concat(j,"/datafiles"),o()({method:"GET",params:o()({},T)},H||{})));case 2:case"end":return p.stop()}},Z)})),w.apply(this,arguments)}function F(Z,l){return C.apply(this,arguments)}function C(){return C=D()(M()().mark(function Z(l,H){var P,j,T;return M()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return P=l.key,j=l.version,T=J()(l,_e),p.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(P,"/").concat(j,"/license"),o()({method:"GET",params:o()({},T)},H||{})));case 2:case"end":return p.stop()}},Z)})),C.apply(this,arguments)}function q(Z,l){return ue.apply(this,arguments)}function ue(){return ue=D()(M()().mark(function Z(l,H){var P,j,T;return M()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return P=l.key,j=l.version,T=J()(l,X),p.abrupt("return",(0,R.request)("/api/v1/datasets/".concat(P,"/").concat(j,"/readme"),o()({method:"GET",params:o()({},T)},H||{})));case 2:case"end":return p.stop()}},Z)})),ue.apply(this,arguments)}},84922:function(ze,se,r){function oe(n){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},oe(n)}Object.defineProperty(se,"__esModule",{value:!0}),se.default=me;var J=o(r(67294)),z=M(r(45697));function M(n){return n&&n.__esModule?n:{default:n}}function ce(n){if(typeof WeakMap!="function")return null;var s=new WeakMap,_=new WeakMap;return(ce=function(W){return W?_:s})(n)}function o(n,s){if(!s&&n&&n.__esModule)return n;if(n===null||oe(n)!=="object"&&typeof n!="function")return{default:n};var _=ce(s);if(_&&_.has(n))return _.get(n);var v={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in n)if(c!=="default"&&Object.prototype.hasOwnProperty.call(n,c)){var a=W?Object.getOwnPropertyDescriptor(n,c):null;a&&(a.get||a.set)?Object.defineProperty(v,c,a):v[c]=n[c]}return v.default=n,_&&_.set(n,v),v}function le(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function D(n,s){for(var _=0;_<s.length;_++){var v=s[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(n,v.key,v)}}function R(n,s,_){return s&&D(n.prototype,s),_&&D(n,_),Object.defineProperty(n,"prototype",{writable:!1}),n}function pe(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),s&&he(n,s)}function he(n,s){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,W){return v.__proto__=W,v},he(n,s)}function je(n){var s=_e();return function(){var v=X(n),W;if(s){var c=X(this).constructor;W=Reflect.construct(v,arguments,c)}else W=v.apply(this,arguments);return De(this,W)}}function De(n,s){if(s&&(oe(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(n)}function re(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function X(n){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},X(n)}var Y=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],ae=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],G=typeof window!="undefined";function me(n){var s=function(_){pe(W,_);var v=je(W);function W(c){var a;return le(this,W),a=v.call(this,c),a.p=Promise.resolve(),a.resizeHandler=null,a.handlers={},a.syncWindowResize=a.syncWindowResize.bind(re(a)),a.syncEventHandlers=a.syncEventHandlers.bind(re(a)),a.attachUpdateEvents=a.attachUpdateEvents.bind(re(a)),a.getRef=a.getRef.bind(re(a)),a.handleUpdate=a.handleUpdate.bind(re(a)),a.figureCallback=a.figureCallback.bind(re(a)),a.updatePlotly=a.updatePlotly.bind(re(a)),a}return R(W,[{key:"updatePlotly",value:function(a,w,F){var C=this;this.p=this.p.then(function(){if(!C.unmounting){if(!C.el)throw new Error("Missing element reference");return n.react(C.el,{data:C.props.data,layout:C.props.layout,config:C.props.config,frames:C.props.frames})}}).then(function(){C.unmounting||(C.syncWindowResize(a),C.syncEventHandlers(),C.figureCallback(w),F&&C.attachUpdateEvents())}).catch(function(q){C.props.onError&&C.props.onError(q)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(a){this.unmounting=!1;var w=a.frames&&a.frames.length?a.frames.length:0,F=this.props.frames&&this.props.frames.length?this.props.frames.length:0,C=!(a.layout===this.props.layout&&a.data===this.props.data&&a.config===this.props.config&&F===w),q=a.revision!==void 0,ue=a.revision!==this.props.revision;!C&&(!q||q&&!ue)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&G&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),n.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var a=this;!this.el||!this.el.removeListener||ae.forEach(function(w){a.el.on(w,a.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var a=this;!this.el||!this.el.removeListener||ae.forEach(function(w){a.el.removeListener(w,a.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(a){if(typeof a=="function"){var w=this.el,F=w.data,C=w.layout,q=this.el._transitionData?this.el._transitionData._frames:null,ue={data:F,layout:C,frames:q};a(ue,this.el)}}},{key:"syncWindowResize",value:function(a){var w=this;G&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return n.Plots.resize(w.el)},window.addEventListener("resize",this.resizeHandler),a&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(a){this.el=a,this.props.debug&&G&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var a=this;Y.forEach(function(w){var F=a.props["on"+w],C=a.handlers[w],q=!!C;F&&!q?a.addEventHandler(w,F):!F&&q?a.removeEventHandler(w):F&&q&&F!==C&&(a.removeEventHandler(w),a.addEventHandler(w,F))})}},{key:"addEventHandler",value:function(a,w){this.handlers[a]=w,this.el.on(this.getPlotlyEventName(a),this.handlers[a])}},{key:"removeEventHandler",value:function(a){this.el.removeListener(this.getPlotlyEventName(a),this.handlers[a]),delete this.handlers[a]}},{key:"getPlotlyEventName",value:function(a){return"plotly_"+a.toLowerCase()}},{key:"render",value:function(){return J.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),W}(J.Component);return s.propTypes={data:z.default.arrayOf(z.default.object),config:z.default.object,layout:z.default.object,frames:z.default.arrayOf(z.default.object),revision:z.default.number,onInitialized:z.default.func,onPurge:z.default.func,onError:z.default.func,onUpdate:z.default.func,debug:z.default.bool,style:z.default.object,className:z.default.string,useResizeHandler:z.default.bool,divId:z.default.string},Y.forEach(function(_){s.propTypes["on"+_]=z.default.func}),s.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},s}},58660:function(ze,se,r){var oe;oe={value:!0},se.Z=void 0;var J=M(r(84922)),z=M(r(25478));function M(le){return le&&le.__esModule?le:{default:le}}var ce=(0,J.default)(z.default),o=ce;se.Z=o}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3cc19c83-66e6-59d2-9e2d-bf2d7211b7c0")}catch(e){}}();
//# debugId=3cc19c83-66e6-59d2-9e2d-bf2d7211b7c0
