(self.webpackChunkbiominer_indexd_studio=self.webpackChunkbiominer_indexd_studio||[]).push([[113,2921],{79559:function(fr,at,f){"use strict";f.d(at,{Z:function(){return xt}});var Zt=f(67294),c=f(48054),pt=f(42075),m=f(4393),G=f(85893),v=function(we){var u=we.type,Pe=u===void 0?"list":u,Ue=we.rows,ot=Ue===void 0?5:Ue,st=we.loading,Qe=st===void 0?!0:st,ht=we.children;return Qe?Pe==="table"?(0,G.jsxs)("div",{className:"skeleton-table",children:[(0,G.jsx)("div",{className:"skeleton-table-header",children:(0,G.jsx)(c.Z.Input,{active:!0,style:{width:"100%",height:48}})}),(0,G.jsx)("div",{className:"skeleton-table-body",children:Array.from({length:ot}).map(function(ut,Se){return(0,G.jsx)("div",{className:"skeleton-table-row",children:(0,G.jsxs)(pt.Z,{style:{width:"100%"},children:[(0,G.jsx)(c.Z.Input,{active:!0,style:{width:100}}),(0,G.jsx)(c.Z.Input,{active:!0,style:{width:200}}),(0,G.jsx)(c.Z.Input,{active:!0,style:{width:150}}),(0,G.jsx)(c.Z.Input,{active:!0,style:{width:180}}),(0,G.jsx)(c.Z.Input,{active:!0,style:{width:120}})]})},Se)})})]}):Pe==="card"?(0,G.jsx)("div",{className:"skeleton-card-grid",children:Array.from({length:ot}).map(function(ut,Se){return(0,G.jsx)(m.Z,{className:"skeleton-card",children:(0,G.jsx)(c.Z,{active:!0,paragraph:{rows:3}})},Se)})}):Pe==="form"?(0,G.jsx)("div",{className:"skeleton-form",children:Array.from({length:ot}).map(function(ut,Se){return(0,G.jsxs)("div",{className:"skeleton-form-item",children:[(0,G.jsx)(c.Z.Input,{active:!0,style:{width:120,marginBottom:8}}),(0,G.jsx)(c.Z.Input,{active:!0,style:{width:"100%",height:32}})]},Se)})}):(0,G.jsx)("div",{className:"skeleton-list",children:Array.from({length:ot}).map(function(ut,Se){return(0,G.jsx)("div",{className:"skeleton-list-item",children:(0,G.jsx)(c.Z,{active:!0,avatar:!0,paragraph:{rows:2},className:"skeleton-list-content"})},Se)})}):(0,G.jsx)(G.Fragment,{children:ht})},xt=v},74964:function(fr,at,f){"use strict";f.r(at),f.d(at,{default:function(){return wn}});var Zt=f(15009),c=f.n(Zt),pt=f(99289),m=f.n(pt),G=f(5574),v=f.n(G),xt=f(97857),ke=f.n(xt),we=f(90844),u=f(67294),Pe=f(2921),Ue=f(84910),ot=f(12444),st=f.n(ot),Qe=f(72004),ht=f.n(Qe),ut=function(){function i(r){st()(this,i),this.adapter=r}return ht()(i,[{key:"buildURL",value:function(n){return this.adapter.buildURL(n)}},{key:"request",value:function(n,t){return this.adapter.request(n,t)}},{key:"getBaseURL",value:function(){return this.adapter.getBaseURL()}},{key:"listSessions",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions?dataset_key_version=".concat(encodeURIComponent(a||""))));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"createSession",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions",{method:"POST",body:JSON.stringify({requirement:a,context:d})}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"getSession",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a)));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"deleteSession",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a),{method:"DELETE"}));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getSessionContext",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/context")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getSessionState",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/state")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getGoal",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/goals")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"generateGoal",value:function(){var r=m()(c()().mark(function t(a){var d,l,o=arguments;return c()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return d=o.length>1&&o[1]!==void 0?o[1]:"generate",l=o.length>2?o[2]:void 0,P.abrupt("return",this.adapter.request("sessions/".concat(a,"/goals"),{method:"POST",body:JSON.stringify({mode:d,feedback:l})}));case 3:case"end":return P.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"updateGoal",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/goals"),{method:"PUT",body:JSON.stringify({content:d})}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"deleteGoal",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/goals"),{method:"DELETE"}));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getGoalLogs",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/goals/logs")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getPlan",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/plans")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"generatePlan",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/plans"),{method:"POST",body:JSON.stringify({constraints:d})}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"updatePlan",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/plans"),{method:"PUT",body:JSON.stringify({plan:d})}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"deletePlan",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/plans"),{method:"DELETE"}));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getPlanLogs",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/plans/logs")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getWorkflowState",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/workflow/state")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"cleanNonPendingSteps",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/clean"),{method:"POST"}));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"startExecution",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/executions"),{method:"POST"}));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getExecutionStatus",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/executions/status")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getSteps",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getStep",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d)));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"executeStep",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d,"/execute"),{method:"POST"}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"getStepLogs",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d,"/logs")));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"stopStep",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d,"/stop"),{method:"POST"}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"deleteStep",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d),{method:"DELETE"}));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"getStepFiles",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d,"/files")));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"getSessionArtifacts",value:function(){var r=m()(c()().mark(function t(a){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.adapter.request("sessions/".concat(a,"/files")));case 1:case"end":return l.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()},{key:"getStepArtifacts",value:function(){var r=m()(c()().mark(function t(a,d){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d,"/artifacts")));case 1:case"end":return o.stop()}},t,this)}));function n(t,a){return r.apply(this,arguments)}return n}()},{key:"getStepArtifactFile",value:function(){var r=m()(c()().mark(function t(a,d,l){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.adapter.request("sessions/".concat(a,"/steps/").concat(d,"/artifacts/").concat(l)));case 1:case"end":return g.stop()}},t,this)}));function n(t,a,d){return r.apply(this,arguments)}return n}()},{key:"browseDirectory",value:function(){var r=m()(c()().mark(function t(a){var d;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return d=a?"browse?path=".concat(encodeURIComponent(a)):"browse",o.abrupt("return",this.adapter.request(d));case 2:case"end":return o.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()}]),i}(),Se=f(2453),Me=f(83062),le=f(83622),it=f(86738),Ye=f(74330),mt=f(15360),qe=f(82061),Lt=f(47389),tt=f(43471),Bt=f(60219),Tt=f(28508),Pt=f(84702),vt=f(23315),Xt=f(55102),rt=f(28248),e=f(85893),ie=Xt.Z.TextArea;function Re(i){var r=i.open,n=i.title,t=i.onConfirm,a=i.onCancel,d=i.loading,l=d===void 0?!1:d,o=(0,u.useState)(""),g=v()(o,2),P=g[0],M=g[1],s=function(){t(P),M("")},I=function(){a(),M("")};return(0,e.jsxs)(rt.Z,{title:n,open:r,onOk:s,onCancel:I,confirmLoading:l,okText:"Regenerate",cancelText:"Cancel",width:600,children:[(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("p",{style:{marginBottom:8,color:"var(--jp-ui-font-color1)"},children:"Please provide feedback or additional requirements to help improve the regeneration:"}),(0,e.jsx)(ie,{value:P,onChange:function(B){return M(B.target.value)},placeholder:`For example: Please focus more on data visualization
Or: Add more error handling steps
Or: Leave empty to regenerate without specific feedback`,rows:6,disabled:l,style:{fontSize:"14px",fontFamily:"var(--jp-ui-font-family)"}})]}),(0,e.jsx)("div",{style:{color:"var(--jp-ui-font-color2)",fontSize:"12px"},children:"\u{1F4A1} Tip: Providing specific feedback will help generate better results. You can also leave it empty to regenerate with the same context."})]})}function Ze(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,n=useState(i),t=_slicedToArray(n,2),a=t[0],d=t[1];return useEffect(function(){var l=setTimeout(function(){d(i)},r);return function(){clearTimeout(l)}},[i,r]),a}function xe(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,n=(0,u.useState)(null),t=v()(n,2),a=t[0],d=t[1];return(0,u.useEffect)(function(){return function(){a&&clearTimeout(a)}},[a]),function(){for(var l=arguments.length,o=new Array(l),g=0;g<l;g++)o[g]=arguments[g];a&&clearTimeout(a);var P=setTimeout(function(){i.apply(void 0,o)},r);d(P)}}function Te(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=useRef(),a=useRef(r),d=useRef(null),l=useRef(!1);useEffect(function(){t.current=i},[i]),useEffect(function(){a.current=r},[r]),useEffect(function(){if(!n){d.current&&(clearTimeout(d.current),d.current=null);return}var o=function(){var g=_asyncToGenerator(_regeneratorRuntime().mark(function P(){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!l.current){s.next=4;break}return console.warn("[useSafeInterval] Previous execution still running, skipping..."),d.current=setTimeout(o,a.current),s.abrupt("return");case 4:if(l.current=!0,s.prev=5,!t.current){s.next=9;break}return s.next=9,t.current();case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(5),console.error("[useSafeInterval] Callback error:",s.t0);case 14:return s.prev=14,l.current=!1,s.finish(14);case 17:d.current=setTimeout(o,a.current);case 18:case"end":return s.stop()}},P,null,[[5,11,14,17]])}));return function(){return g.apply(this,arguments)}}();return o(),function(){d.current&&(clearTimeout(d.current),d.current=null)}},[r,n])}function h(i,r){var n=r.interval,t=r.enabled,a=r.onError,d=r.maxRetries,l=d===void 0?3:d,o=r.backoffMultiplier,g=o===void 0?2:o,P=r.maxBackoffInterval,M=P===void 0?3e4:P,s=r.pauseOnHidden,I=s===void 0?!0:s,Z=r.runImmediately,B=Z===void 0?!0:Z,V=(0,u.useRef)(),R=(0,u.useRef)(null),T=(0,u.useRef)(!1),w=(0,u.useRef)(0),N=(0,u.useRef)(n),E=(0,u.useState)(!1),S=v()(E,2),Y=S[0],K=S[1],U=(0,u.useRef)(!document.hidden),A=(0,u.useRef)({maxRetries:l,backoffMultiplier:g,maxBackoffInterval:M,onError:a,pauseOnHidden:I});(0,u.useEffect)(function(){A.current={maxRetries:l,backoffMultiplier:g,maxBackoffInterval:M,onError:a,pauseOnHidden:I}},[l,g,M,a,I]),(0,u.useEffect)(function(){V.current=i},[i]),(0,u.useEffect)(function(){N.current=n},[n]);var W=(0,u.useCallback)(function(){w.current=0,N.current=n},[n]),$=(0,u.useCallback)(m()(c()().mark(function ne(){var _,J,he;return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!T.current){C.next=3;break}return console.warn("[useSmartPolling] Previous execution still running, skipping manual trigger"),C.abrupt("return");case 3:if(T.current=!0,K(!0),C.prev=5,!V.current){C.next=9;break}return C.next=9,V.current();case 9:w.current=0,N.current=n,C.next=21;break;case 13:C.prev=13,C.t0=C.catch(5),_=C.t0 instanceof Error?C.t0:new Error(String(C.t0)),console.error("[useSmartPolling] Callback error:",_),w.current++,J=A.current,w.current<J.maxRetries?(he=Math.min(N.current*J.backoffMultiplier,J.maxBackoffInterval),N.current=he,console.warn("[useSmartPolling] Retry ".concat(w.current,"/").concat(J.maxRetries,", ")+"next interval: ".concat(he,"ms"))):console.error("[useSmartPolling] Max retries (".concat(J.maxRetries,") reached, stopping polling")),J.onError&&J.onError(_);case 21:return C.prev=21,T.current=!1,K(!1),C.finish(21);case 25:case"end":return C.stop()}},ne,null,[[5,13,21,25]])})),[n]);return(0,u.useEffect)(function(){var ne=function(){U.current=!document.hidden,document.hidden?console.log("[useSmartPolling] Page hidden, pausing polling"):(console.log("[useSmartPolling] Page visible, resuming polling"),t&&V.current&&$())};return document.addEventListener("visibilitychange",ne),function(){document.removeEventListener("visibilitychange",ne)}},[t,$]),(0,u.useEffect)(function(){if(!t){R.current&&(clearTimeout(R.current),R.current=null);return}var ne=A.current;if(w.current>=ne.maxRetries){R.current&&(clearTimeout(R.current),R.current=null);return}var _=function(){var J=m()(c()().mark(function he(){var ee,C;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(ee=A.current,!(ee.pauseOnHidden&&!U.current)){j.next=4;break}return R.current=setTimeout(_,N.current),j.abrupt("return");case 4:return j.next=6,$();case 6:C=A.current,t&&w.current<C.maxRetries&&(R.current=setTimeout(_,N.current));case 8:case"end":return j.stop()}},he)}));return function(){return J.apply(this,arguments)}}();return B?_():R.current=setTimeout(_,N.current),function(){R.current&&(clearTimeout(R.current),R.current=null)}},[t,n,$,B]),{trigger:$,isPolling:Y,retryCount:w.current,reset:W}}function de(i){var r=i.sessionId,n=i.stepId,t=i.logType,a=i.apiClient,d=i.height,l=d===void 0?"60vh":d,o=i.showToolbar,g=o===void 0?!0:o,P=i.autoScroll,M=P===void 0?!0:P,s=(0,u.useState)(""),I=v()(s,2),Z=I[0],B=I[1],V=(0,u.useState)(!1),R=v()(V,2),T=R[0],w=R[1],N=(0,u.useState)(""),E=v()(N,2),S=E[0],Y=E[1],K=(0,u.useRef)(null),U=function(){var ne=m()(c()().mark(function _(){var J;return c()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(ee.prev=0,t!=="goal"){ee.next=7;break}return ee.next=4,a.getGoalLogs(r);case 4:J=ee.sent,ee.next=18;break;case 7:if(t!=="plan"){ee.next=13;break}return ee.next=10,a.getPlanLogs(r);case 10:J=ee.sent,ee.next=18;break;case 13:if(!(t==="step"&&n)){ee.next=18;break}return ee.next=16,a.getStepLogs(r,n);case 16:J=ee.sent,J.status&&Y(J.status);case 18:J&&J.logs?B(J.logs):J&&!J.exists&&B("No logs available"),ee.next=24;break;case 21:ee.prev=21,ee.t0=ee.catch(0),console.error("Failed to load logs:",ee.t0);case 24:case"end":return ee.stop()}},_,null,[[0,21]])}));return function(){return ne.apply(this,arguments)}}();(0,u.useEffect)(function(){w(!0),U().finally(function(){return w(!1)})},[r,n,t]);var A=(0,u.useMemo)(function(){return S==="generating"||S==="running"?1e3:2e3},[S]),W=(0,u.useMemo)(function(){return!(S==="completed"||S==="failed"||S==="stopped")},[S]);h(m()(c()().mark(function ne(){return c()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,U();case 2:case"end":return J.stop()}},ne)})),{interval:A,enabled:W,onError:function(_){console.error("[LogViewer] Polling error:",_)},runImmediately:!1}),(0,u.useEffect)(function(){M&&K.current&&setTimeout(function(){K.current&&(K.current.scrollTop=K.current.scrollHeight)},0)},[Z,M]);var $=function(){B("")};return(0,e.jsxs)("div",{className:"biominer-log-viewer",style:{height:"100%",display:"flex",flexDirection:"column"},children:[g&&(0,e.jsxs)("div",{className:"biominer-log-toolbar",children:[(0,e.jsx)(le.ZP,{size:"small",onClick:U,disabled:T,icon:(0,e.jsx)(tt.Z,{}),children:"Refresh"}),(0,e.jsx)(le.ZP,{size:"small",danger:!0,onClick:$,disabled:!Z,icon:(0,e.jsx)(qe.Z,{}),children:"Clear"}),S&&(0,e.jsxs)("span",{style:{fontSize:12,marginLeft:8},children:["Status: ",(0,e.jsx)("strong",{children:S})]})]}),(0,e.jsx)(Ye.Z,{spinning:T,children:(0,e.jsx)("div",{ref:K,className:"biominer-log-content",style:{height:g?"calc(".concat(l," - 48px)"):l,padding:"12px",fontFamily:"monospace",fontSize:"12px",lineHeight:"1.6",whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"var(--jp-layout-color0)",color:"var(--jp-ui-font-color0)",overflowY:"auto"},children:Z||(0,e.jsx)("div",{style:{textAlign:"center",color:"var(--jp-ui-font-color2)",padding:"40px"},children:"No logs yet"})})})]})}function jt(i){var r=i.open,n=i.title,t=i.sessionId,a=i.stepId,d=i.logType,l=i.apiClient,o=i.onClose;return(0,e.jsx)(rt.Z,{title:n,open:r,onCancel:o,footer:[(0,e.jsx)(le.ZP,{onClick:o,children:"Close"},"close")],width:900,styles:{body:{padding:0}},children:(0,e.jsx)("div",{style:{height:"70vh"},children:(0,e.jsx)(de,{sessionId:t,stepId:a,logType:d,apiClient:l,height:"70vh",showToolbar:!0,autoScroll:!0})})})}function At(i){var r=i.sessionId,n=i.apiClient,t=i.sessionState,a=i.onUpdate,d=i.compact,l=(0,u.useState)(null),o=v()(l,2),g=o[0],P=o[1],M=(0,u.useState)(!1),s=v()(M,2),I=s[0],Z=s[1],B=(0,u.useState)(""),V=v()(B,2),R=V[0],T=V[1],w=(0,u.useState)(!1),N=v()(w,2),E=N[0],S=N[1],Y=(0,u.useState)(!0),K=v()(Y,2),U=K[0],A=K[1],W=(0,u.useState)(!1),$=v()(W,2),ne=$[0],_=$[1],J=(0,u.useState)(!1),he=v()(J,2),ee=he[0],C=he[1],Be=(0,u.useState)(!1),j=v()(Be,2),z=j[0],O=j[1];(0,u.useEffect)(function(){q(),k()},[r]),(0,u.useEffect)(function(){if(t){var ue=t.goal_status==="generating";S(ue),t.goal_status==="completed"&&(q(),k())}},[t]);var q=function(){var ue=m()(c()().mark(function te(){var be;return c()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,n.getGoal(r);case 3:be=F.sent,P(be),T(be.content),F.next=11;break;case 8:F.prev=8,F.t0=F.catch(0),console.log("Goal not found yet");case 11:case"end":return F.stop()}},te,null,[[0,8]])}));return function(){return ue.apply(this,arguments)}}(),k=function(){var ue=m()(c()().mark(function te(){var be;return c()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,n.getWorkflowState(r);case 3:be=F.sent,A(be.can_edit_goal),_(be.has_plan),F.next=11;break;case 8:F.prev=8,F.t0=F.catch(0),console.error("Failed to load workflow state:",F.t0);case 11:case"end":return F.stop()}},te,null,[[0,8]])}));return function(){return ue.apply(this,arguments)}}(),ae=function(){var ue=m()(c()().mark(function te(){var be;return c()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return S(!0),F.prev=1,F.next=4,n.generateGoal(r,"generate");case 4:be=F.sent,P(be),T(be.content),a(),F.next=13;break;case 10:F.prev=10,F.t0=F.catch(1),Se.ZP.error(F.t0 instanceof Error?F.t0.message:"Failed to generate");case 13:return F.prev=13,S(!1),F.finish(13);case 16:case"end":return F.stop()}},te,null,[[1,10,13,16]])}));return function(){return ue.apply(this,arguments)}}(),oe=function(){var ue=m()(c()().mark(function te(be){var ce;return c()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return S(!0),C(!1),Ae.prev=2,Ae.next=5,n.generateGoal(r,"refine",be);case 5:ce=Ae.sent,P(ce),T(ce.content),a(),Ae.next=14;break;case 11:Ae.prev=11,Ae.t0=Ae.catch(2),Se.ZP.error(Ae.t0 instanceof Error?Ae.t0.message:"Failed to regenerate");case 14:return Ae.prev=14,S(!1),Ae.finish(14);case 17:case"end":return Ae.stop()}},te,null,[[2,11,14,17]])}));return function(be){return ue.apply(this,arguments)}}(),ve=function(){var ue=m()(c()().mark(function te(){var be;return c()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return S(!0),F.prev=1,F.next=4,n.updateGoal(r,R);case 4:be=F.sent,P(be),Z(!1),a(),F.next=13;break;case 10:F.prev=10,F.t0=F.catch(1),Se.ZP.error(F.t0 instanceof Error?F.t0.message:"Failed to save");case 13:return F.prev=13,S(!1),F.finish(13);case 16:case"end":return F.stop()}},te,null,[[1,10,13,16]])}));return function(){return ue.apply(this,arguments)}}(),ge=function(){T((g==null?void 0:g.content)||""),Z(!1)},Oe=function(){var ue=m()(c()().mark(function te(){return c()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return S(!0),ce.prev=1,ce.next=4,n.deleteGoal(r);case 4:return P(null),ce.next=7,k();case 7:a(),Se.ZP.success("Goal deleted successfully"),ce.next=14;break;case 11:ce.prev=11,ce.t0=ce.catch(1),Se.ZP.error(ce.t0 instanceof Error?ce.t0.message:"Failed to delete goal");case 14:return ce.prev=14,S(!1),ce.finish(14);case 17:case"end":return ce.stop()}},te,null,[[1,11,14,17]])}));return function(){return ue.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Re,{open:ee,title:"Regenerate Goal",onConfirm:oe,onCancel:function(){return C(!1)},loading:E}),(0,e.jsx)(jt,{open:z,title:"Goal Generation Logs",sessionId:r,logType:"goal",apiClient:n,onClose:function(){return O(!1)}}),(0,e.jsxs)("div",{className:"biominer-panel-content",children:[(0,e.jsxs)("div",{className:"biominer-panel-header",children:[(0,e.jsx)("h3",{children:"\u{1F4DD} Goal"}),(0,e.jsx)("div",{className:"biominer-panel-actions",children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Me.Z,{title:"View Goal generation logs",children:(0,e.jsx)(le.ZP,{onClick:function(){return O(!0)},size:"small",title:"View Goal generation logs",children:d?(0,e.jsx)(mt.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(mt.Z,{}),"Logs"]})})}),(0,e.jsx)(it.Z,{title:"Delete Goal",description:"Are you sure you want to delete the goal? This action cannot be undone.",onConfirm:Oe,disabled:E||!g||ne,okText:"Delete",okType:"danger",cancelText:"Cancel",children:(0,e.jsx)(Me.Z,{title:ne?"Cannot delete goal when plan exists":"Delete Goal",children:(0,e.jsx)(le.ZP,{danger:!0,disabled:E||!g||ne,size:"small",children:d?(0,e.jsx)(qe.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qe.Z,{}),"Delete"]})})})}),(0,e.jsx)(le.ZP,{onClick:function(){return Z(!0)},disabled:E||!U||ne||!g,size:"small",title:U?"":"Cannot edit Goal when Plan exists, please delete Plan first",children:d?(0,e.jsx)(Lt.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Lt.Z,{}),"Edit"]})}),(0,e.jsxs)(le.ZP,{onClick:function(){return C(!0)},disabled:E||!U||ne||!g,size:"small",title:U?"":"Cannot regenerate Goal when Plan exists",children:[(0,e.jsx)(tt.Z,{}),d?"":"Regenerate"]})]})})]}),(0,e.jsx)(Ye.Z,{spinning:E,children:(0,e.jsx)("div",{className:"biominer-panel-body",children:g?I?(0,e.jsxs)("div",{className:"biominer-edit-mode",children:[(0,e.jsx)("textarea",{className:"biominer-textarea",value:R,onChange:function(te){return T(te.target.value)},disabled:E}),(0,e.jsxs)("div",{className:"biominer-edit-actions",children:[(0,e.jsxs)(le.ZP,{type:"primary",onClick:ve,disabled:E,children:[(0,e.jsx)(Bt.Z,{}),E?"Saving...":"Save"]}),(0,e.jsxs)(le.ZP,{onClick:ge,disabled:E,children:[(0,e.jsx)(Tt.Z,{})," Cancel"]})]})]}):(0,e.jsxs)("div",{className:"biominer-markdown-content",children:[(0,e.jsx)(Pt.D,{remarkPlugins:[vt.Z],children:g.content}),(0,e.jsxs)("div",{className:"biominer-meta",children:["Version: v",g.version," | Generated by: ",g.generated_by," | Updated at: ",new Date(g.updated_at||g.created_at).toLocaleString()]})]}):(0,e.jsxs)("div",{className:"biominer-empty-state",children:[(0,e.jsx)("p",{children:"No goal generated yet"}),(0,e.jsxs)(le.ZP,{onClick:ae,disabled:E,children:[(0,e.jsx)(tt.Z,{})," ",E?"Generating...":"Generate goal"]})]})})})]})]})}var Vr=function(){function i(){st()(this,i)}return ht()(i,[{key:"API_BASE_PATH",get:function(){return this.getEnvString("REACT_APP_API_BASE_PATH","biominer-dataflow/api")}},{key:"API_TIMEOUT",get:function(){return this.getEnvNumber("REACT_APP_API_TIMEOUT",3e5)}},{key:"LOG_POLL_INTERVAL",get:function(){return this.getEnvNumber("REACT_APP_LOG_POLL_INTERVAL",2e3)}},{key:"STATUS_POLL_INTERVAL",get:function(){return this.getEnvNumber("REACT_APP_STATUS_POLL_INTERVAL",3e3)}},{key:"MAX_LOG_SIZE",get:function(){return this.getEnvNumber("REACT_APP_MAX_LOG_SIZE",1e5)}},{key:"AUTO_SCROLL_ENABLED",get:function(){return this.getEnvBoolean("REACT_APP_AUTO_SCROLL_ENABLED",!0)}},{key:"SHOW_TIMESTAMPS",get:function(){return this.getEnvBoolean("REACT_APP_SHOW_TIMESTAMPS",!0)}},{key:"MAX_VISIBLE_STEPS",get:function(){return this.getEnvNumber("REACT_APP_MAX_VISIBLE_STEPS",100)}},{key:"DEBUG_MODE",get:function(){return this.getEnvBoolean("REACT_APP_DEBUG_MODE",!1)}},{key:"getEnvString",value:function(n,t){if(typeof window!="undefined"&&window.__BIOMINER_CONFIG__){var a=window.__BIOMINER_CONFIG__;if(a[n]!==void 0)return a[n]}var d=globalThis[n];return d!==void 0?String(d):t}},{key:"getEnvNumber",value:function(n,t){var a=this.getEnvString(n,String(t)),d=parseInt(a,10);return isNaN(d)?t:d}},{key:"getEnvBoolean",value:function(n,t){var a=this.getEnvString(n,String(t));return a.toLowerCase()==="true"||a==="1"}},{key:"printConfig",value:function(){console.log("BioMiner DataFlow Configuration:"),console.log("  API_BASE_PATH:",this.API_BASE_PATH),console.log("  API_TIMEOUT:",this.API_TIMEOUT),console.log("  LOG_POLL_INTERVAL:",this.LOG_POLL_INTERVAL),console.log("  STATUS_POLL_INTERVAL:",this.STATUS_POLL_INTERVAL),console.log("  MAX_LOG_SIZE:",this.MAX_LOG_SIZE),console.log("  AUTO_SCROLL_ENABLED:",this.AUTO_SCROLL_ENABLED),console.log("  SHOW_TIMESTAMPS:",this.SHOW_TIMESTAMPS),console.log("  MAX_VISIBLE_STEPS:",this.MAX_VISIBLE_STEPS),console.log("  DEBUG_MODE:",this.DEBUG_MODE)}}]),i}(),Ft=new Vr;Ft.DEBUG_MODE&&Ft.printConfig();var pr=f(87784),ct=f(55287);function We(i){if(!i||i===0)return"";if(i<60)return"".concat(i,"s");if(i<3600){var r=Math.floor(i/60);return"".concat(r,"m")}if(i<86400){var n=Math.floor(i/3600),t=Math.floor(i%3600/60);return t>0?"".concat(n,"h ").concat(t,"m"):"".concat(n,"h")}var a=Math.floor(i/86400),d=Math.floor(i%86400/3600);return d>0?"".concat(a,"d ").concat(d,"h"):"".concat(a,"d")}function bt(i){var r=i.step,n=i.isExecuting,t=i.isStopping,a=i.isDeleting,d=i.loading,l=i.onExecute,o=i.onStop,g=i.onDelete,P=i.onView,M=i.compact,s=M===void 0?!1:M,I=r.runtime_status,Z=(I==null?void 0:I.status)||r.status,B=I==null?void 0:I.duration_seconds,V=Z==="pending",R=Z==="running",T=Z==="completed",w=Z==="failed",N=Z==="stopped",E=V&&!n&&!d,S=!R&&!a&&!d,Y=function(){var U={pending:"\u25B6\uFE0F",running:"\u23F3",completed:"\u2705",failed:"\u274C",stopped:"\u23F9",skipped:"\u23ED\uFE0F"};return U[Z]||"\u25B6\uFE0F"};return(0,e.jsxs)("div",{className:"biominer-step-card ".concat(s?"compact":""),children:[(0,e.jsxs)("div",{className:"biominer-step-header",children:[(0,e.jsxs)("span",{className:"biominer-step-status",children:[Y(),R&&(0,e.jsx)("span",{className:"biominer-spinner",title:"Running",children:"\u27F3"})]}),(0,e.jsxs)("span",{className:"biominer-step-order",children:["Step ",r.order]}),(0,e.jsx)(Me.Z,{title:r.title,children:(0,e.jsx)("span",{className:"biominer-step-title",style:{cursor:"help"},children:r.title})}),(0,e.jsx)("span",{className:"biominer-step-type",children:r.type}),r.estimated_duration&&(0,e.jsxs)("span",{className:"biominer-step-duration-badge",children:["\u23F1\uFE0F ",r.estimated_duration]})]}),(0,e.jsx)("div",{className:"biominer-step-description",children:(0,e.jsx)(Pt.D,{remarkPlugins:[vt.Z],children:r.description})}),r.dependencies&&r.dependencies.length>0&&(0,e.jsx)("div",{className:"biominer-step-dependencies",children:(0,e.jsxs)("small",{children:["\u{1F4CC} Dependencies: ",r.dependencies.join(", ")]})}),(0,e.jsxs)("div",{className:"biominer-step-actions",children:[(0,e.jsx)(le.ZP,{type:"primary",size:"small",danger:!0,onClick:function(){return l(r.id)},disabled:!E,title:n?"Submitting step execution...":R?"Step is running, check logs for progress":T?"Step completed successfully":w?"Step failed - use Clean Steps to reset":N?"Step stopped - use Clean Steps to reset":V?"Click to execute this step":"Step cannot be executed",children:n?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"biominer-spinner",children:"\u27F3"})," Submitting..."]}):R?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"biominer-spinner",children:"\u27F3"})," Running..."]}):T?"\u2705 Completed":w?"\u274C Failed":N?"\u23F9 Stopped":"\u25B6 Execute"}),R&&(0,e.jsx)(it.Z,{title:"Stop execution and clear data",onConfirm:function(){return o(r.id)},disabled:t,children:(0,e.jsx)(le.ZP,{type:"primary",size:"small",danger:!0,disabled:t,title:"Stop execution and clear data",children:t?"Stopping...":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(pr.Z,{})," Stop"]})})}),!s&&(0,e.jsxs)(le.ZP,{type:"primary",size:"small",onClick:function(){return P(r.id)},title:"View step details, files, and logs",children:[(0,e.jsx)(ct.Z,{})," View"]}),(0,e.jsx)(it.Z,{title:"Clear step execution result?",description:"The execution log and output files of step ".concat(r.id," will be deleted, and the step will be reset to pending status."),onConfirm:function(){return g(r.id)},disabled:!S,okText:"Confirm clear",okType:"danger",cancelText:"Cancel",children:(0,e.jsx)(le.ZP,{size:"small",danger:!0,disabled:!S,title:R?"Step is running, cannot be cleared":a?"Deleting...":"Clear step execution result",children:a?"Deleting...":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qe.Z,{})," Delete"]})})}),B&&(0,e.jsxs)("span",{className:"biominer-step-duration",style:{marginLeft:8,color:"var(--jp-ui-font-color2)"},children:["\u23F1\uFE0F ",We(B)]})]})]})}var wt=f(82494),Qt=f(32983),hr=f(41952),It=f(13769),Ur=f.n(It),Yt=f(63764),mr=f(99948),qt=f(57460),Wr=f.n(qt),vr=f(50975),_t=f(51256),dt=f(42075),Hr=f(69753),$t=f(61086),gr=f(19632),ze=f.n(gr),Kr=f(9783),er=f.n(Kr),Gt=f(57489),_e=f(89593),Jr=f(71230),yr=f(15746),Ot=f(4393),Sr=f(96074),Xr=f(21931),Ct=f(38437),xr=f(25478),jr=f.n(xr),Qr=f(84922),Yr=(0,Qr.default)(jr()),Et={scatter:{name:"Scatter Plot",mappings:["x","y","color","size","text"],required:["x","y"]},line:{name:"Line Plot",mappings:["x","y","color","text"],required:["x","y"]},bar:{name:"Bar Plot",mappings:["x","y","color","text"],required:["x","y"]},histogram:{name:"Histogram",mappings:["x","color","text"],required:["x"]},box:{name:"Box Plot",mappings:["x","y","color","text"],required:["y"]},violin:{name:"Violin Plot",mappings:["x","y","color","text"],required:["y"]},heatmap:{name:"Heatmap",mappings:["x","y","z","text"],required:["x","y","z"]},pie:{name:"Pie Chart",mappings:["labels","text"],required:["labels"]}},tr={x:"X Axis",y:"Y Axis",z:"Z Axis (Numeric)",color:"Color",size:"Size",text:"Text Label",labels:"Labels",values:"Values"},Mt=function(r){var n,t=r.data,a=r.fieldDataDictionary,d=(0,u.useState)("scatter"),l=v()(d,2),o=l[0],g=l[1],P=(0,u.useState)({}),M=v()(P,2),s=M[0],I=M[1],Z=(0,u.useState)(0),B=v()(Z,2),V=B[0],R=B[1],T=Gt.Z.useForm(),w=v()(T,1),N=w[0],E=(0,u.useCallback)(function(j){var z=typeof j=="string"?parseFloat(j):j;return isNaN(z)?"0":z.toFixed(3)},[]),S=(0,u.useMemo)(function(){var j=[],z=[],O=[];return a.forEach(function(q){O.push(q),["number","float","integer"].includes(q.data_type.toLowerCase())?j.push(q):z.push(q)}),{numericFields:j,categoricalFields:z,allFields:O}},[a]),Y=S.numericFields,K=S.categoricalFields,U=S.allFields,A=(0,u.useCallback)(function(j){g(j),I({}),N.resetFields()},[N]),W=(0,u.useCallback)(function(j,z){I(function(O){return ke()(ke()({},O),{},er()({},j,z))})},[]);(0,u.useEffect)(function(){var j=function(){R(function(O){return O+1})};return window.addEventListener("resize",j),function(){return window.removeEventListener("resize",j)}},[]);var $=(0,u.useCallback)(function(j){var z=U;return o==="heatmap"?j==="x"||j==="y"?z=K:j==="z"?z=Y:j==="text"&&(z=U):["y","z","values","size"].includes(j)?z=Y:["color","labels"].includes(j)&&(z=[].concat(ze()(K),ze()(Y))),console.log("Fields for ".concat(j," (").concat(o,"): "),z),z},[U,Y,K,o]),ne=(0,u.useCallback)(function(j){var z=$(j);return z.map(function(O){return(0,e.jsx)(_e.default.Option,{value:O.key,children:(0,e.jsxs)(Me.Z,{title:"".concat(O.key,": ").concat(O.description),children:[O.name," (",O.key,")"]})},O.key)})},[$]),_=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d3","#c7c7c7","#dbdb8d","#9edae5"],J=(0,u.useCallback)(function(j,z,O,q,k){var ae=a.find(function(te){return te.key===j}),oe=a.find(function(te){return te.key===z}),ve=O?a.find(function(te){return te.key===O}):null,ge=q?a.find(function(te){return te.key===q}):null,Oe=k?a.find(function(te){return te.key===k}):null,ue="";return ue+="".concat((ae==null?void 0:ae.name)||j,": %{x}<br>"),ue+="".concat((oe==null?void 0:oe.name)||z,": %{y}<br>"),O&&ve&&(ue+="".concat(ve.name||O,": %{customdata[0]}<br>")),q&&ge&&(ue+="".concat(ge.name||q,": %{customdata[1]}<br>")),k&&Oe&&(ue+="".concat(Oe.name||k,": %{customdata[2]}<br>")),ue+="<extra></extra>",ue},[a]),he=(0,u.useCallback)(function(j,z){var O=a.find(function(oe){return oe.key===j});if(!O)return[];var q=Math.min.apply(Math,ze()(z)),k=Math.max.apply(Math,ze()(z)),ae=(q+k)/2;return[{type:"scatter",mode:"markers",x:[null],y:[null],marker:{size:8,color:"rgba(0,0,0,0)",symbol:"circle"},name:"".concat(O.name||j," (Size)"),showlegend:!0,legendgroup:"size-legend"},{type:"scatter",mode:"markers",x:[null],y:[null],marker:{size:12,color:"rgba(0,0,0,0)",symbol:"circle"},name:"Min: ".concat(E(q)),showlegend:!0,legendgroup:"size-legend"},{type:"scatter",mode:"markers",x:[null],y:[null],marker:{size:16,color:"rgba(0,0,0,0)",symbol:"circle"},name:"Mid: ".concat(E(ae)),showlegend:!0,legendgroup:"size-legend"},{type:"scatter",mode:"markers",x:[null],y:[null],marker:{size:20,color:"rgba(0,0,0,0)",symbol:"circle"},name:"Max: ".concat(E(k)),showlegend:!0,legendgroup:"size-legend"}]},[a]),ee=(0,u.useCallback)(function(j,z,O,q,k,ae){var oe=[],ve=J(z,O,q,k,ae);if(!q){var ge={type:"scatter",mode:"markers",x:j.map(function(X){return X[z]}),y:j.map(function(X){return X[O]}),marker:{size:k?j.map(function(X){return X[k]}):void 0},text:ae?j.map(function(X){return X[ae]}):void 0,customdata:j.map(function(X){return[null,k?X[k]:null,ae?X[ae]:null]}),hovertemplate:ve,name:"Data Points",showlegend:!1};if(oe.push(ge),k){var Oe=j.map(function(X){return X[k]}),ue=he(k,Oe);oe.push.apply(oe,ze()(ue))}return oe}var te=a.find(function(X){return X.key===q}),be=te&&["number","float","integer"].includes(te.data_type.toLowerCase());if(be){var ce=j.map(function(X){return X[q]}),F={type:"scatter",mode:"markers",x:j.map(function(X){return X[z]}),y:j.map(function(X){return X[O]}),marker:{color:ce,colorscale:"Viridis",showscale:!0,colorbar:{title:(te==null?void 0:te.name)||q},size:k?j.map(function(X){return X[k]}):void 0},text:ae?j.map(function(X){return X[ae]}):void 0,customdata:j.map(function(X){return[X[q],k?X[k]:null,ae?X[ae]:null]}),hovertemplate:ve,name:"Data Points",showlegend:!1};if(oe.push(F),k){var Ae=j.map(function(X){return X[k]}),Dt=he(k,Ae);oe.push.apply(oe,ze()(Dt))}return oe}else{var He={};j.forEach(function(X){var Xe=X[q];He[Xe]||(He[Xe]=[]),He[Xe].push(X)});var Ce=Object.entries(He).map(function(X,Xe){var Je=v()(X,2),zt=Je[0],Ke=Je[1];return{type:"scatter",mode:"markers",x:Ke.map(function(Ve){return Ve[z]}),y:Ke.map(function(Ve){return Ve[O]}),marker:{color:_[Xe%_.length],size:k?Ke.map(function(Ve){return Ve[k]}):void 0},text:ae?Ke.map(function(Ve){return Ve[ae]}):void 0,customdata:Ke.map(function(Ve){return[Ve[q],k?Ve[k]:null,ae?Ve[ae]:null]}),hovertemplate:ve,name:"".concat((te==null?void 0:te.name)||q,": ").concat(zt),showlegend:!0}});if(oe.push.apply(oe,ze()(Ce)),k){var ft=j.map(function(X){return X[k]}),Ge=he(k,ft);oe.push.apply(oe,ze()(Ge))}return oe}},[a,he]),C=(0,u.useMemo)(function(){if(!t||t.length===0||!o)return[];var j=Et[o];if(!j)return[];var z=j.required.every(function(p){return s[p]});if(!z)return[];console.log("Plot Data: ",t,s);try{switch(o){case"scatter":return ee(t,s.x,s.y,s.color,s.size,s.text);case"line":var O=[],q=J(s.x,s.y,s.color,s.size,s.text);if(!s.color){var k={type:"scatter",mode:"lines+markers",x:t.map(function(p){return p[s.x]}),y:t.map(function(p){return p[s.y]}),text:s.text?t.map(function(p){return p[s.text]}):void 0,customdata:t.map(function(p){return[null,s.size?p[s.size]:null,s.text?p[s.text]:null]}),hovertemplate:q,name:"Line Plot",showlegend:!1};if(O.push(k),s.size){var ae=t.map(function(p){return p[s.size]}),oe=he(s.size,ae);O.push.apply(O,ze()(oe))}return O}var ve=a.find(function(p){return p.key===s.color}),ge=ve&&["number","float","integer"].includes(ve.data_type.toLowerCase());if(ge){var Oe=t.map(function(p){return p[s.color]}),ue={type:"scatter",mode:"lines+markers",x:t.map(function(p){return p[s.x]}),y:t.map(function(p){return p[s.y]}),line:{color:Oe,colorscale:"Viridis",showscale:!0,colorbar:{title:(ve==null?void 0:ve.name)||s.color}},text:s.text?t.map(function(p){return p[s.text]}):void 0,customdata:t.map(function(p){return[p[s.color],s.size?p[s.size]:null,s.text?p[s.text]:null]}),hovertemplate:q,name:"Line Plot",showlegend:!1};if(O.push(ue),s.size){var te=t.map(function(p){return p[s.size]}),be=he(s.size,te);O.push.apply(O,ze()(be))}return O}else{var ce={};t.forEach(function(p){var Q=p[s.color];ce[Q]||(ce[Q]=[]),ce[Q].push(p)});var F=Object.entries(ce).map(function(p,Q){var Ie=v()(p,2),Fe=Ie[0],Ee=Ie[1];return{type:"scatter",mode:"lines+markers",x:Ee.map(function(De){return De[s.x]}),y:Ee.map(function(De){return De[s.y]}),line:{color:_[Q%_.length]},text:s.text?Ee.map(function(De){return De[s.text]}):void 0,customdata:Ee.map(function(De){return[De[s.color],s.size?De[s.size]:null,s.text?De[s.text]:null]}),hovertemplate:q,name:"".concat((ve==null?void 0:ve.name)||s.color,": ").concat(Fe),showlegend:!0}});if(O.push.apply(O,ze()(F)),s.size){var Ae=t.map(function(p){return p[s.size]}),Dt=he(s.size,Ae);O.push.apply(O,ze()(Dt))}return O}case"bar":var He=[],Ce={};t.forEach(function(p){var Q=p[s.x],Ie=parseFloat(p[s.y])||0;Ce[Q]||(Ce[Q]={sum:0,count:0,values:[],mean:0,std:0}),Ce[Q].sum+=Ie,Ce[Q].count+=1,Ce[Q].values.push(Ie),s.color&&(Ce[Q].color=p[s.color]),s.text&&(Ce[Q].text=p[s.text])}),Object.keys(Ce).forEach(function(p){var Q=Ce[p];Q.mean=Q.sum/Q.count;var Ie=Q.values.reduce(function(Fe,Ee){return Fe+Math.pow(Ee-Q.mean,2)},0)/Q.count;Q.std=Math.sqrt(Ie)});var ft=a.find(function(p){return p.key===s.x}),Ge=a.find(function(p){return p.key===s.y}),X=s.color?a.find(function(p){return p.key===s.color}):null,Xe=s.text?a.find(function(p){return p.key===s.text}):null,Je="";if(Je+="".concat((ft==null?void 0:ft.name)||s.x,": %{x}<br>"),Je+="".concat((Ge==null?void 0:Ge.name)||s.y,": %{y}<br>"),Je+="Count: %{customdata[3]}<br>",Je+="Std Dev: %{customdata[4]}<br>",s.color&&X&&(Je+="".concat(X.name||s.color,": %{customdata[0]}<br>")),s.text&&Xe&&(Je+="".concat(Xe.name||s.text,": %{customdata[2]}<br>")),Je+="<extra></extra>",!s.color){var zt={type:"bar",x:Object.keys(Ce),y:Object.values(Ce).map(function(p){return parseFloat(E(p.mean))}),error_y:{type:"data",array:Object.values(Ce).map(function(p){return parseFloat(E(p.std))}),visible:!0},text:s.text?Object.values(Ce).map(function(p){return p.text}):void 0,customdata:Object.values(Ce).map(function(p){return[null,null,s.text?p.text:null,p.count,E(p.std)]}),hovertemplate:Je,name:"Bar Plot",showlegend:!1};return He.push(zt),He}var Ke=a.find(function(p){return p.key===s.color}),Ve=Ke&&["number","float","integer"].includes(Ke.data_type.toLowerCase());if(Ve){var cr={type:"bar",x:Object.keys(Ce),y:Object.values(Ce).map(function(p){return parseFloat(E(p.mean))}),error_y:{type:"data",array:Object.values(Ce).map(function(p){return parseFloat(E(p.std))}),visible:!0},marker:{color:Object.values(Ce).map(function(p){return p.color}),colorscale:"Viridis",showscale:!0,colorbar:{title:(Ke==null?void 0:Ke.name)||s.color}},text:s.text?Object.values(Ce).map(function(p){return p.text}):void 0,customdata:Object.values(Ce).map(function(p){return[E(p.color),null,s.text?p.text:null,p.count,E(p.std)]}),hovertemplate:Je,name:"Bar Plot",showlegend:!1};return He.push(cr),He}else{var St={};Object.entries(Ce).forEach(function(p){var Q=v()(p,2),Ie=Q[0],Fe=Q[1],Ee=Fe.color;St[Ee]||(St[Ee]={}),St[Ee][Ie]=Fe});var Ht=Object.entries(St).map(function(p,Q){var Ie=v()(p,2),Fe=Ie[0],Ee=Ie[1];return{type:"bar",x:Object.keys(Ee),y:Object.values(Ee).map(function(De){return parseFloat(E(De.mean))}),error_y:{type:"data",array:Object.values(Ee).map(function(De){return parseFloat(E(De.std))}),visible:!0},marker:{color:_[Q%_.length]},text:s.text?Object.values(Ee).map(function(De){return De.text}):void 0,customdata:Object.values(Ee).map(function(De){return[Fe,null,s.text?De.text:null,De.count,E(De.std)]}),hovertemplate:Je,name:"".concat((Ke==null?void 0:Ke.name)||s.color,": ").concat(Fe),showlegend:!0}});return He.push.apply(He,ze()(Ht)),He}case"histogram":var lt=[],et=J(s.x,"Count",s.color,void 0,void 0);if(!s.color){var se={type:"histogram",x:t.map(function(p){return p[s.x]}),customdata:t.map(function(p){return[null,null,null]}),hovertemplate:et,name:"Histogram",showlegend:!1};return lt.push(se),lt}var x=a.find(function(p){return p.key===s.color}),L=x&&["number","float","integer"].includes(x.data_type.toLowerCase());if(L){var D=t.map(function(p){return p[s.color]}),b={type:"histogram",x:t.map(function(p){return p[s.x]}),marker:{color:D,colorscale:"Viridis",showscale:!0,colorbar:{title:(x==null?void 0:x.name)||s.color}},customdata:t.map(function(p){return[p[s.color],null,null]}),hovertemplate:et,name:"Histogram",showlegend:!1};return lt.push(b),lt}else{var y={};t.forEach(function(p){var Q=p[s.color];y[Q]||(y[Q]=[]),y[Q].push(p)});var Ne=Object.entries(y).map(function(p,Q){var Ie=v()(p,2),Fe=Ie[0],Ee=Ie[1];return{type:"histogram",x:Ee.map(function(De){return De[s.x]}),marker:{color:_[Q%_.length]},customdata:Ee.map(function(De){return[De[s.color],null,null]}),hovertemplate:et,name:"".concat((x==null?void 0:x.name)||s.color,": ").concat(Fe),showlegend:!0}});return lt.push.apply(lt,ze()(Ne)),lt}case"box":var ye=[],un=a.find(function(p){return p.key===s.x}),Kt=a.find(function(p){return p.key===s.y});if(s.x){var $r={};t.forEach(function(p){var Q=p[s.x];$r[Q]||($r[Q]=[]),$r[Q].push(p[s.y])});var kn=Object.entries($r).map(function(p,Q){var Ie=v()(p,2),Fe=Ie[0],Ee=Ie[1];return{type:"box",y:Ee,name:Fe,boxpoints:"all",jitter:.3,marker:{color:_[Q%_.length]},hovertemplate:"<b>".concat(Fe,"</b><br>")+"".concat((un==null?void 0:un.name)||s.x,": ").concat(Fe,"<br>")+"".concat((Kt==null?void 0:Kt.name)||s.y,": %{y}<br>")+"<extra></extra>"}});return kn}else{var Pn={type:"box",y:t.map(function(p){return p[s.y]}),name:"Box Plot",boxpoints:"all",jitter:.3,hovertemplate:"<b>Box Plot</b><br>"+"".concat((Kt==null?void 0:Kt.name)||s.y,": %{y}<br>")+"<extra></extra>"};return ye.push(Pn),ye}case"violin":var yn=[],cn=a.find(function(p){return p.key===s.x}),Jt=a.find(function(p){return p.key===s.y});if(s.x){var Gr={};t.forEach(function(p){var Q=p[s.x];Gr[Q]||(Gr[Q]=[]),Gr[Q].push(p[s.y])});var En=Object.entries(Gr).map(function(p,Q){var Ie=v()(p,2),Fe=Ie[0],Ee=Ie[1];return{type:"violin",y:Ee,name:Fe,box:{visible:!0},meanline:{visible:!0},marker:{color:_[Q%_.length]},hovertemplate:"<b>".concat(Fe,"</b><br>")+"".concat((cn==null?void 0:cn.name)||s.x,": ").concat(Fe,"<br>")+"".concat((Jt==null?void 0:Jt.name)||s.y,": %{y}<br>")+"<extra></extra>"}});return En}else{var Nn={type:"violin",y:t.map(function(p){return p[s.y]}),name:"Violin Plot",box:{visible:!0},meanline:{visible:!0},hovertemplate:"<b>Violin Plot</b><br>"+"".concat((Jt==null?void 0:Jt.name)||s.y,": %{y}<br>")+"<extra></extra>"};return yn.push(Nn),yn}case"heatmap":var Sn=ze()(new Set(t.map(function(p){return p[s.x]}))),xn=ze()(new Set(t.map(function(p){return p[s.y]}))),dn=[];xn.forEach(function(p,Q){dn[Q]=[],Sn.forEach(function(Ie,Fe){var Ee=t.find(function(jn){return jn[s.x]===Ie&&jn[s.y]===p}),De=Ee&&parseFloat(Ee[s.z])||0;dn[Q][Fe]=parseFloat(E(De))})});var fn=a.find(function(p){return p.key===s.x}),pn=a.find(function(p){return p.key===s.y}),hn=a.find(function(p){return p.key===s.z});return[{type:"heatmap",x:Sn,y:xn,z:dn,colorscale:"Viridis",name:"Heatmap",hovertemplate:"<b>Heatmap</b><br>"+"".concat((fn==null?void 0:fn.name)||s.x,": %{x}<br>")+"".concat((pn==null?void 0:pn.name)||s.y,": %{y}<br>")+"".concat((hn==null?void 0:hn.name)||s.z,": %{z}<br>")+"<extra></extra>"}];case"pie":var dr={};t.forEach(function(p){var Q=p[s.labels];dr[Q]?dr[Q]+=1:dr[Q]=1});var mn=a.find(function(p){return p.key===s.labels});return[{type:"pie",labels:Object.keys(dr),values:Object.values(dr),textinfo:"label+percent",name:"Pie Chart",hovertemplate:"<b>%{label}</b><br>"+"".concat((mn==null?void 0:mn.name)||s.labels,": %{label}<br>")+"Count: %{value}<br>Percentage: %{percent}<br><extra></extra>"}];default:return[]}}catch(p){return console.error("Error generating plot data:",p),[]}},[t,o,s]),Be=(0,u.useMemo)(function(){var j=Et[o],z=a.find(function(q){return q.key===s.x}),O=a.find(function(q){return q.key===s.y});return{title:(j==null?void 0:j.name)||"Chart",xaxis:{title:{text:(z==null?void 0:z.key)||s.x||"X Axis",standoff:20},automargin:!0,showline:!0,linecolor:"#000",linewidth:1,zeroline:!1,tickwidth:1,tickcolor:"#000",mirror:!0,gridcolor:"#f0f0f0",gridwidth:1,showgrid:!1},yaxis:{title:{text:(O==null?void 0:O.key)||s.y||"Y Axis",standoff:20},automargin:!0,showline:!0,linecolor:"#000",linewidth:1,zeroline:!1,tickwidth:1,tickcolor:"#000",mirror:!0,gridcolor:"#f0f0f0",gridwidth:1,showgrid:!1},margin:{t:30,l:50,r:15,b:50},showlegend:!0,legend:{orientation:"v",x:1.02,y:1,xanchor:"left",yanchor:"top",bgcolor:"rgba(255,255,255,0.8)",bordercolor:"#ccc",borderwidth:1},height:void 0,width:void 0,autosize:!0,plot_bgcolor:"rgba(0,0,0,0)",paper_bgcolor:"rgba(0,0,0,0)"}},[o,s,a]);return(0,e.jsx)("div",{className:"visualizer-container",children:(0,e.jsxs)(Jr.Z,{gutter:[16,16],style:{height:"100%"},children:[(0,e.jsx)(yr.Z,{xs:24,lg:7,children:(0,e.jsx)(Ot.Z,{title:"Chart Configuration",size:"small",className:"control-panel",style:{height:"100%"},children:(0,e.jsxs)(dt.Z,{direction:"vertical",style:{width:"100%"},size:"middle",children:[(0,e.jsxs)("div",{className:"config-section",children:[(0,e.jsx)("div",{className:"section-title",children:"Chart Type"}),(0,e.jsx)(_e.default,{value:o,onChange:A,style:{width:"100%"},placeholder:"Select Chart Type",size:"middle",children:Object.entries(Et).map(function(j){var z=v()(j,2),O=z[0],q=z[1];return(0,e.jsx)(_e.default.Option,{value:O,children:q.name},O)})})]}),(0,e.jsx)(Sr.Z,{}),(0,e.jsxs)("div",{className:"config-section",children:[(0,e.jsx)("div",{className:"section-title",children:"Variable Mapping"}),(0,e.jsx)(Gt.Z,{form:N,layout:"vertical",className:"mapping-form",children:o&&((n=Et[o])===null||n===void 0?void 0:n.mappings.map(function(j){var z=Et[o].required.includes(j);return(0,e.jsx)(Gt.Z.Item,{label:(0,e.jsxs)("span",{children:[tr[j],z&&(0,e.jsx)("span",{className:"required-mark",children:" *"})]}),name:j,rules:z?[{required:!0,message:"This field is required"}]:[],children:(0,e.jsx)(_e.default,{placeholder:"Select ".concat(tr[j]," Variable"),onChange:function(q){return W(j,q)},allowClear:!0,size:"middle",showSearch:!0,optionFilterProp:"children",children:ne(j)})},j)}))})]}),(0,e.jsx)("div",{className:"status-info",children:(0,e.jsxs)(Xr.Z.Text,{type:"secondary",children:["Data Points: ",(t==null?void 0:t.length)||0," | Fields: ",(a==null?void 0:a.length)||0]})})]})})}),(0,e.jsx)(yr.Z,{xs:24,lg:17,children:(0,e.jsx)(Ot.Z,{title:"Chart Display",size:"small",className:"chart-panel",style:{height:"100%"},children:(0,e.jsx)("div",{className:"chart-container",children:C.length>0?(0,e.jsx)(Yr,{data:C,layout:Be,config:{responsive:!0,displayModeBar:!0,displaylogo:!1,modeBarButtonsToRemove:["pan2d","lasso2d","select2d"],toImageButtonOptions:{format:"png",filename:"chart",height:500,width:700,scale:1}},className:"plotly-container",style:{width:"100%",height:"100%"},useResizeHandler:!0},V):(0,e.jsxs)("div",{className:"empty-state",children:[(0,e.jsx)($t.Z,{className:"empty-icon"}),(0,e.jsx)("div",{className:"empty-text",children:o?Object.keys(s).length===0?"Please configure variable mapping":"Please complete the required variable mapping configuration":"Please select a chart type to start visualization"}),t.length===0&&(0,e.jsx)(Ct.Z,{message:"No data available",type:"error",description:"You should select your interested fields to visualize first."})]})})})})]})})},br=Mt,rr=f(84105),wr=f(59255),nr=f(54565),vn=f(9896),Cr=["className","children"];_t.O3h.registerModules([_t.ea9]);var kr={CODE:["js","ts","tsx","jsx","py","java","cpp","c","h","cs","go","rs","php","rb","swift","kt","scala","r","sql","sh","bash","ps1","yaml","yml","xml","html","css","scss","sass","less","json","dockerfile","makefile"],TABLE:["csv","tsv","tab"],MARKDOWN:["md","markdown"],PDF:["pdf"],EXCEL:["xls","xlsx"],WORD:["doc","docx"],POWERPOINT:["ppt","pptx"],IMAGE:["png","jpg","jpeg","gif","bmp","svg","webp","ico","tiff"],TEXT:["txt","log","conf","cfg","ini"]},Nt={js:"javascript",ts:"typescript",tsx:"typescript",jsx:"javascript",py:"python",rb:"ruby",yml:"yaml",md:"markdown",dockerfile:"dockerfile",makefile:"makefile"};function qr(i){var r=i.sessionId,n=i.stepId,t=i.filePath,a=i.apiClient,d=(0,u.useState)(!0),l=v()(d,2),o=l[0],g=l[1],P=(0,u.useState)(null),M=v()(P,2),s=M[0],I=M[1],Z=(0,u.useState)(null),B=v()(Z,2),V=B[0],R=B[1],T=(0,u.useMemo)(function(){for(var S,Y=((S=t.split(".").pop())===null||S===void 0?void 0:S.toLowerCase())||"",K="TEXT",U=0,A=Object.entries(kr);U<A.length;U++){var W=v()(A[U],2),$=W[0],ne=W[1];if(ne.includes(Y)){K=$;break}}return{fileExtension:Y,fileCategory:K}},[t]),w=T.fileExtension,N=T.fileCategory;if((0,u.useEffect)(function(){var S=new AbortController;I(null),g(!0),R(null);var Y=function(){var K=m()(c()().mark(function U(){var A,W,$,ne,_,J,he;return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(C.prev=0,!(N==="PDF"||N==="EXCEL"||N==="WORD"||N==="POWERPOINT"||N==="IMAGE")){C.next=21;break}if(A=t,t.startsWith(n)&&(A=t.replace("".concat(n,"/"),"")),!(N==="EXCEL"||N==="WORD")){C.next=17;break}return W=a.buildURL("sessions/".concat(r,"/steps/").concat(n,"/artifacts/").concat(encodeURIComponent(A),"?raw=true")),C.next=8,a.request(W,{signal:S.signal});case 8:if($=C.sent,$.ok){C.next=11;break}throw new Error("Failed to fetch file: ".concat($.statusText));case 11:return C.next=13,$.arrayBuffer();case 13:ne=C.sent,S.signal.aborted||I({arrayBuffer:ne,directUrl:W}),C.next=19;break;case 17:_=a.buildURL("sessions/".concat(r,"/steps/").concat(n,"/artifacts/").concat(encodeURIComponent(A),"?raw=true")),S.signal.aborted||I({directUrl:_});case 19:return S.signal.aborted||g(!1),C.abrupt("return");case 21:return J=t,t.startsWith(n)&&(J=t.replace("".concat(n,"/"),"")),C.next=25,a.getStepArtifactFile(r,n,J);case 25:he=C.sent,S.signal.aborted||I(he),C.next=34;break;case 29:if(C.prev=29,C.t0=C.catch(0),!(C.t0 instanceof Error&&C.t0.name==="AbortError")){C.next=33;break}return C.abrupt("return");case 33:S.signal.aborted||R(C.t0 instanceof Error?C.t0.message:"Failed to load file");case 34:return C.prev=34,S.signal.aborted||g(!1),C.finish(34);case 37:case"end":return C.stop()}},U,null,[[0,29,34,37]])}));return function(){return K.apply(this,arguments)}}();return Y(),function(){S.abort()}},[r,n,t,a,N]),o)return(0,e.jsx)("div",{className:"biominer-file-preview-loading",children:(0,e.jsx)("div",{className:"loading-spinner"})});if(V)return(0,e.jsx)("div",{className:"biominer-file-preview-error",children:(0,e.jsxs)("p",{children:["\u274C Error: ",V]})});if(!s)return(0,e.jsx)("div",{className:"biominer-file-preview-loading",children:(0,e.jsx)("div",{className:"loading-spinner",children:(0,e.jsx)("p",{children:"Preparing file..."})})});var E=function(Y){if(!Y)return!1;var K=t.split("/").pop()||"";return Y.includes(encodeURIComponent(K))||Y.includes(K)};return(0,e.jsxs)("div",{className:"biominer-file-preview",children:[(0,e.jsxs)("div",{className:"biominer-file-preview-header",children:[(0,e.jsxs)("h5",{children:["\u{1F4C4} ",t]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(le.ZP,{type:"text",icon:(0,e.jsx)(Hr.Z,{}),onClick:function(){var Y=t.replace("".concat(n,"/"),""),K=a.buildURL("sessions/".concat(r,"/steps/").concat(n,"/artifacts/").concat(encodeURIComponent(Y),"?raw=true")),U=document.createElement("a");U.href=K,U.download=Y.split("/").pop()||"file",document.body.appendChild(U),U.click(),document.body.removeChild(U)},children:"Download"}),(0,e.jsxs)("small",{children:[N," \u2022 ",w.toUpperCase()]})]})]}),(0,e.jsxs)("div",{className:"biominer-file-preview-body",children:[N==="CODE"&&(0,e.jsx)(Pr,{content:s,language:Nt[w]||w,filePath:t},t),N==="TABLE"&&(0,e.jsx)(Er,{content:s,filePath:t,fileType:w},t),N==="MARKDOWN"&&(0,e.jsx)(_r,{content:s,filePath:t},t),N==="PDF"&&s.directUrl&&E(s.directUrl)&&(0,e.jsx)(Dr,{filePath:t,url:s.directUrl},t),N==="EXCEL"&&s.arrayBuffer&&(0,e.jsx)(en,{content:s,filePath:t},t),N==="WORD"&&s.arrayBuffer&&(0,e.jsx)(Zr,{content:s,filePath:t},t),N==="IMAGE"&&s.directUrl&&E(s.directUrl)&&(0,e.jsx)(Nr,{content:s,filePath:t,fileType:w},t),N==="POWERPOINT"&&s.directUrl&&E(s.directUrl)&&(0,e.jsx)(tn,{filePath:t,fileUrl:s.directUrl},t),N==="TEXT"&&(0,e.jsx)(gt,{filePath:t,content:s},t)]})]})}function Pr(i){var r=i.content,n=i.language,t=i.filePath,a=(0,u.useState)("vs-dark"),d=v()(a,2),l=d[0],o=d[1],g={readOnly:!0,minimap:{enabled:!0},scrollBeyondLastLine:!1,fontSize:14,fontFamily:"'Fira Code', 'Cascadia Code', 'Consolas', monospace",fontLigatures:!0,folding:!0,foldingStrategy:"indentation",showFoldingControls:"always",lineNumbers:"on",renderWhitespace:"selection",wordWrap:"on",automaticLayout:!0,scrollbar:{vertical:"auto",horizontal:"auto"}};return(0,e.jsxs)("div",{className:"biominer-code-preview",children:[(0,e.jsxs)("div",{className:"code-preview-toolbar",children:[(0,e.jsx)("button",{onClick:function(){return o(l==="vs-dark"?"light":"vs-dark")},className:"theme-toggle-btn",children:l==="vs-dark"?"\u2600\uFE0F Light":"\u{1F319} Dark"}),(0,e.jsx)("span",{className:"file-path",children:t})]}),(0,e.jsx)(Yt.ZP,{height:"100%",language:n,value:(r==null?void 0:r.content)||"",theme:l,options:g},t)]})}function ar(i){var r=i.columnName,n=i.data,t=i.onClose,a=(0,u.useMemo)(function(){var d=n.map(function(g){return g[r]}).filter(function(g){return g!=null}),l=d.filter(function(g){return typeof g=="number"});if(l.length>0)return l.sort(function(g,P){return g-P}),{type:"numeric",count:l.length,min:l[0],max:l[l.length-1],mean:l.reduce(function(g,P){return g+P},0)/l.length,median:l[Math.floor(l.length/2)]};var o={};return d.forEach(function(g){var P=String(g);o[P]=(o[P]||0)+1}),{type:"categorical",count:d.length,unique:Object.keys(o).length,frequencies:Object.entries(o).sort(function(g,P){return P[1]-g[1]}).slice(0,10)}},[n,r]);return(0,e.jsx)("div",{className:"distribution-modal-overlay",onClick:t,children:(0,e.jsxs)("div",{className:"distribution-modal",onClick:function(l){return l.stopPropagation()},children:[(0,e.jsxs)("div",{className:"modal-header",children:[(0,e.jsxs)("h4",{children:["Distribution: ",r]}),(0,e.jsx)("button",{onClick:t,className:"close-btn",children:"\u2715"})]}),(0,e.jsx)("div",{className:"modal-body",children:a.type==="numeric"?(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Type:"})," Numeric"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Count:"})," ",a.count]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Min:"})," ",a.min.toFixed(2)]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Max:"})," ",a.max.toFixed(2)]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Mean:"})," ",a.mean.toFixed(2)]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Median:"})," ",a.median.toFixed(2)]})]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Type:"})," Categorical"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Total Values:"})," ",a.count]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Unique Values:"})," ",a.unique]}),(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:"Top 10 Values:"})}),(0,e.jsx)("ul",{children:a.frequencies.map(function(d){var l=v()(d,2),o=l[0],g=l[1];return(0,e.jsxs)("li",{children:[o,": ",g," (",(g/a.count*100).toFixed(1),"%)"]},o)})})]})})]})})}function Er(i){var r=i.content,n=i.fileType,t=i.filePath,a=(0,u.useRef)(null),d=(0,u.useState)(null),l=v()(d,2),o=l[0],g=l[1],P=(0,u.useState)(!1),M=v()(P,2),s=M[0],I=M[1],Z=(0,u.useMemo)(function(){if(!(r!=null&&r.content))return[];var T=r.content,w=n==="tsv"||n==="tab"?"	":",";try{var N=Wr().parse(T,{delimiter:w,header:!0,skipEmptyLines:!0,dynamicTyping:!0,transformHeader:function(S){return S.trim()}});return N.errors&&N.errors.length>0&&console.warn("Papa Parse warnings:",N.errors),N.data}catch(E){return console.error("Failed to parse table data:",E),[]}},[r==null?void 0:r.content,n,t]),B=(0,u.useMemo)(function(){if(Z.length===0)return[];var T=Object.keys(Z[0]||{});return T.map(function(w){return{field:w,headerName:w,sortable:!0,filter:!0,resizable:!0,floatingFilter:!0,headerComponent:function(){return(0,e.jsxs)("div",{className:"modern-column-header",children:[(0,e.jsx)("span",{className:"column-name",children:w}),(0,e.jsx)(Me.Z,{title:"View distribution for ".concat(w),children:(0,e.jsx)(le.ZP,{type:"text",size:"small",icon:(0,e.jsx)($t.Z,{}),onClick:function(){return g(w)},className:"column-chart-btn"})})]})}}})},[Z]),V=(0,u.useMemo)(function(){return{flex:1,minWidth:120,filter:!0,sortable:!0,resizable:!0}},[]),R=(0,u.useMemo)(function(){if(Z.length===0)return[];var T=Object.keys(Z[0]||{});return T.map(function(w){var N=Z[0][w],E=typeof N=="number"&&!isNaN(N);return{key:w,name:w,data_type:E?"NUMBER":"STRING",description:"Column: ".concat(w)}})},[Z]);return Z.length===0?(0,e.jsx)("div",{className:"biominer-table-preview",children:(0,e.jsx)("div",{className:"table-preview-loading",children:(0,e.jsx)("p",{children:"No data to display"})})}):(0,e.jsxs)("div",{className:"biominer-table-preview",children:[(0,e.jsxs)("div",{className:"table-preview-toolbar",children:[(0,e.jsxs)("span",{className:"table-info",children:[Z.length," rows \xD7 ",B.length," columns"]}),(0,e.jsx)(dt.Z,{children:(0,e.jsx)(Me.Z,{title:"Open advanced chart analysis",children:(0,e.jsx)(le.ZP,{type:"primary",icon:(0,e.jsx)($t.Z,{}),onClick:function(){return I(!0)},className:"chart-analysis-btn",children:"Chart Analysis"})})})]}),(0,e.jsx)("div",{className:"ag-theme-alpine modern-table",style:{height:"550px",width:"100%"},children:(0,e.jsx)(vr.s,{ref:a,rowData:Z,columnDefs:B,defaultColDef:V,enableCellTextSelection:!0,pagination:!0,paginationPageSize:100,paginationPageSizeSelector:[50,100,200,500]},t)}),o&&(0,e.jsx)(ar,{columnName:o,data:Z,onClose:function(){return g(null)}}),(0,e.jsx)(rt.Z,{title:"Chart Analysis",open:s,onCancel:function(){return I(!1)},getContainer:function(){return document.getElementById("biominer-dataflow-root")||document.body},footer:null,width:"90%",height:"80vh",style:{top:20,maxHeight:"80vh"},destroyOnHidden:!0,children:(0,e.jsx)("div",{className:"chart-modal-content",children:(0,e.jsx)(br,{data:Z,fieldDataDictionary:R})})})]})}function _r(i){var r=i.content,n=i.filePath;return(0,e.jsx)("div",{className:"biominer-markdown-preview",children:(0,e.jsx)(Pt.D,{remarkPlugins:[vt.Z],rehypePlugins:[mr.Z],components:{code:function(a){var d=a.className,l=a.children,o=Ur()(a,Cr),g=/language-(\w+)/.exec(d||"");return g?(0,e.jsx)(Yt.ZP,{height:"200px",language:g[1],value:String(l).replace(/\n$/,""),theme:"vs-dark",options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:13,lineNumbers:"off",folding:!1,scrollbar:{vertical:"auto",horizontal:"auto"}}},n):(0,e.jsx)("code",ke()(ke()({className:d},o),{},{children:l}))}},children:(r==null?void 0:r.content)||""},n)})}function Nr(i){var r=i.content,n=i.filePath,t=i.fileType,a=(0,u.useState)(!1),d=v()(a,2),l=d[0],o=d[1],g=(0,u.useState)(0),P=v()(g,2),M=P[0],s=P[1],I=(0,u.useState)(function(){return Date.now()}),Z=v()(I,1),B=Z[0],V=(0,u.useMemo)(function(){var N=(r==null?void 0:r.directUrl)||n,E=N.includes("?")?"&":"?";return"".concat(N).concat(E,"t=").concat(B,"&retry=").concat(M)},[r==null?void 0:r.directUrl,n,B,M]),R=function(){o(!1),s(function(E){return E+1})},T=function(){o(!1)},w=function(){console.error("ImagePreview - Failed to load image:",V),o(!0)};return l?(0,e.jsx)("div",{className:"biominer-image-preview",children:(0,e.jsxs)("div",{className:"biominer-file-preview-error",children:[(0,e.jsx)("p",{children:"\u274C \u56FE\u7247\u52A0\u8F7D\u5931\u8D25"}),(0,e.jsxs)("p",{style:{fontSize:"12px",marginTop:"8px",color:"#666"},children:["\u6587\u4EF6: ",n.split("/").pop()]}),(0,e.jsx)("button",{onClick:R,style:{marginTop:"10px",padding:"8px 16px",cursor:"pointer",backgroundColor:"#1890ff",color:"white",border:"none",borderRadius:"4px"},children:"\u{1F504} \u91CD\u65B0\u52A0\u8F7D"})]})}):(0,e.jsx)("div",{className:"biominer-image-preview",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",backgroundColor:"#f5f5f5",padding:"20px"},children:(0,e.jsx)("img",{src:V,alt:n.split("/").pop()||"image",onLoad:T,onError:w,style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:"4px"}})})}function gt(i){var r=i.content,n=i.filePath;return(0,e.jsx)("div",{className:"biominer-text-preview",children:(0,e.jsx)(Yt.ZP,{height:"100%",language:"plaintext",value:(r==null?void 0:r.content)||"",theme:"vs-dark",options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,wordWrap:"on",lineNumbers:"on"}},n)})}function Dr(i){var r=i.filePath,n=i.url,t=(0,u.useState)(!1),a=v()(t,2),d=a[0],l=a[1],o=(0,u.useState)(!0),g=v()(o,2),P=g[0],M=g[1],s=(0,u.useState)(0),I=v()(s,2),Z=I[0],B=I[1],V=(0,u.useMemo)(function(){return"".concat(n,"&t=").concat(Date.now(),"&retry=").concat(Z)},[n,Z]);(0,u.useEffect)(function(){l(!1),M(!0);var T=setTimeout(function(){M(!1)},3e3);return function(){return clearTimeout(T)}},[V]);var R=function(){l(!1),M(!0),B(function(w){return w+1})};return(0,e.jsxs)("div",{className:"biominer-pdf-preview",style:{width:"100%",height:"600px",position:"relative"},children:[P&&(0,e.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:(0,e.jsx)("div",{className:"loading-spinner"})}),d&&(0,e.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,textAlign:"center"},children:(0,e.jsxs)("div",{className:"biominer-file-preview-error",children:[(0,e.jsx)("p",{children:"\u274C PDF\u52A0\u8F7D\u5931\u8D25"}),(0,e.jsx)("button",{onClick:R,style:{marginTop:"10px",padding:"8px 16px",cursor:"pointer",backgroundColor:"#1890ff",color:"white",border:"none",borderRadius:"4px"},children:"\u{1F504} \u91CD\u65B0\u52A0\u8F7D"})]})}),(0,e.jsx)("embed",{src:V,type:"application/pdf",width:"100%",height:"100%",onError:function(){l(!0),M(!1)},style:{display:d?"none":"block"}},r)]})}function en(i){var r=i.content,n=i.filePath,t=(0,u.useState)([]),a=v()(t,2),d=a[0],l=a[1],o=(0,u.useState)([]),g=v()(o,2),P=g[0],M=g[1],s=(0,u.useState)(null),I=v()(s,2),Z=I[0],B=I[1],V=(0,u.useState)(!0),R=v()(V,2),T=R[0],w=R[1],N=(0,u.useState)(!1),E=v()(N,2),S=E[0],Y=E[1],K=(0,u.useRef)(null);(0,u.useEffect)(function(){var W=!0,$=function(){var ne=m()(c()().mark(function _(){var J,he,ee,C,Be,j,z,O;return c()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(k.prev=0,W){k.next=3;break}return k.abrupt("return");case 3:if(w(!0),B(null),r!=null&&r.arrayBuffer){k.next=7;break}throw new Error("No file data available");case 7:if(J=rr.ij(r.arrayBuffer,{type:"array"}),he=J.SheetNames[0],ee=J.Sheets[he],C=rr.P6.sheet_to_json(ee,{header:1,defval:"",blankrows:!1}),W){k.next=13;break}return k.abrupt("return");case 13:if(C.length!==0){k.next=16;break}return W&&(l([]),M([]),w(!1)),k.abrupt("return");case 16:Be=C[0],j=C.slice(1),z=j.map(function(ae){var oe={};return Be.forEach(function(ve,ge){oe[ve||"Column_".concat(ge)]=ae[ge]}),oe}),O=Be.map(function(ae,oe){return{field:ae||"Column_".concat(oe),headerName:ae||"Column ".concat(oe+1),sortable:!0,filter:!0,resizable:!0,floatingFilter:!0}}),W&&(l(z),M(O)),k.next=27;break;case 23:k.prev=23,k.t0=k.catch(0),console.error("Excel preview error:",k.t0),W&&B(k.t0 instanceof Error?k.t0.message:"Failed to load Excel file");case 27:return k.prev=27,W&&w(!1),k.finish(27);case 30:case"end":return k.stop()}},_,null,[[0,23,27,30]])}));return function(){return ne.apply(this,arguments)}}();return $(),function(){W=!1}},[r,n]);var U=(0,u.useMemo)(function(){return{flex:1,minWidth:120,filter:!0,sortable:!0,resizable:!0}},[]),A=(0,u.useMemo)(function(){if(d.length===0)return[];var W=Object.keys(d[0]||{});return W.map(function($){var ne=d[0][$],_=typeof ne=="number"&&!isNaN(ne);return{key:$,name:$,data_type:_?"NUMBER":"STRING",description:"Column: ".concat($)}})},[d]);return T?(0,e.jsx)("div",{className:"biominer-excel-preview",children:(0,e.jsx)("div",{className:"loading-spinner"})}):Z?(0,e.jsx)("div",{className:"biominer-excel-preview",children:(0,e.jsx)("div",{className:"biominer-file-preview-error",children:(0,e.jsxs)("p",{children:["\u274C Error loading Excel: ",Z]})})}):d.length===0?(0,e.jsx)("div",{className:"biominer-excel-preview",children:(0,e.jsx)("div",{className:"biominer-file-preview-error",children:(0,e.jsx)("p",{children:"\u26A0\uFE0F Excel file is empty"})})}):(0,e.jsxs)("div",{className:"biominer-excel-preview",children:[(0,e.jsxs)("div",{className:"table-preview-toolbar",children:[(0,e.jsxs)("span",{className:"table-info",children:["\u{1F4CA} ",d.length," rows \xD7 ",P.length," columns"]}),(0,e.jsx)(dt.Z,{children:(0,e.jsx)(Me.Z,{title:"Open advanced chart analysis",children:(0,e.jsx)(le.ZP,{type:"primary",icon:(0,e.jsx)($t.Z,{}),onClick:function(){return Y(!0)},className:"chart-analysis-btn",children:"Chart Analysis"})})})]}),(0,e.jsx)("div",{className:"ag-theme-alpine modern-table",style:{height:"550px",width:"100%"},children:(0,e.jsx)(vr.s,{ref:K,rowData:d,columnDefs:P,defaultColDef:U,enableCellTextSelection:!0,pagination:!0,paginationPageSize:100,paginationPageSizeSelector:[50,100,200,500]},n)}),(0,e.jsx)(rt.Z,{title:"Chart Analysis",open:S,onCancel:function(){return Y(!1)},getContainer:function(){return document.getElementById("biominer-dataflow-root")||document.body},footer:null,width:"90%",style:{top:20,maxHeight:"80vh"},destroyOnClose:!0,children:(0,e.jsx)("div",{className:"chart-modal-content",children:(0,e.jsx)(br,{data:d,fieldDataDictionary:A})})})]})}function Zr(i){var r=i.content,n=i.filePath,t=(0,u.useState)(""),a=v()(t,2),d=a[0],l=a[1],o=(0,u.useState)(null),g=v()(o,2),P=g[0],M=g[1],s=(0,u.useState)(!0),I=v()(s,2),Z=I[0],B=I[1];return(0,u.useEffect)(function(){var V=!0,R=function(){var T=m()(c()().mark(function w(){var N;return c()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(S.prev=0,V){S.next=3;break}return S.abrupt("return");case 3:if(B(!0),M(null),r!=null&&r.arrayBuffer){S.next=7;break}throw new Error("No file data available");case 7:return S.next=9,wr.convertToHtml({arrayBuffer:r.arrayBuffer});case 9:N=S.sent,V&&(l(N.value),N.messages&&N.messages.length>0&&console.warn("Mammoth conversion warnings:",N.messages)),S.next=17;break;case 13:S.prev=13,S.t0=S.catch(0),console.error("Word preview error:",S.t0),V&&M(S.t0 instanceof Error?S.t0.message:"Failed to load Word document");case 17:return S.prev=17,V&&B(!1),S.finish(17);case 20:case"end":return S.stop()}},w,null,[[0,13,17,20]])}));return function(){return T.apply(this,arguments)}}();return R(),function(){V=!1}},[r,n]),Z?(0,e.jsx)("div",{className:"biominer-word-preview",children:(0,e.jsx)("div",{className:"loading-spinner"})}):P?(0,e.jsx)("div",{className:"biominer-word-preview",children:(0,e.jsxs)("div",{className:"biominer-file-preview-error",children:[(0,e.jsxs)("p",{children:["\u274C Error loading Word: ",P]}),(0,e.jsx)("p",{style:{fontSize:"12px",marginTop:"8px",color:"#666"},children:"Note: Only .docx files are supported. Legacy .doc files require conversion."})]})}):(0,e.jsx)("div",{className:"biominer-word-preview",children:(0,e.jsx)("div",{className:"word-content",dangerouslySetInnerHTML:{__html:d},style:{padding:"20px",backgroundColor:"white",color:"black",minHeight:"500px",maxWidth:"800px",margin:"0 auto",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontFamily:"Arial, sans-serif",fontSize:"14px",lineHeight:"1.6"}},n)})}function tn(i){var r=i.filePath,n=i.fileUrl;return(0,e.jsx)("div",{className:"biominer-powerpoint-preview",children:(0,e.jsxs)("div",{className:"biominer-file-preview-error",children:[(0,e.jsx)("p",{children:"\u{1F4CA} PowerPoint Preview"}),(0,e.jsx)("p",{style:{fontSize:"14px",margin:"16px 0",color:"#666"},children:"PowerPoint files cannot be previewed directly in the browser."}),(0,e.jsxs)("a",{href:n,download:r.split("/").pop(),style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#1890ff",color:"white",textDecoration:"none",borderRadius:"4px",fontWeight:"bold"},children:["\u2B07\uFE0F Download ",r.split("/").pop()]},r)]})})}function Lr(i){var r={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",svg:"image/svg+xml",webp:"image/webp",ico:"image/x-icon",tiff:"image/tiff",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",txt:"text/plain",csv:"text/csv",tsv:"text/tab-separated-values",json:"application/json",xml:"application/xml",html:"text/html"};return r[i]||"application/octet-stream"}function Tr(i){var r,n=i.sessionId,t=i.stepId,a=i.apiClient,d=i.onClose,l=i.embedded,o=l===void 0?!1:l,g=i.refreshKey,P=g===void 0?"":g,M=(0,u.useState)(!0),s=v()(M,2),I=s[0],Z=s[1],B=(0,u.useState)([]),V=v()(B,2),R=V[0],T=V[1],w=(0,u.useState)(null),N=v()(w,2),E=N[0],S=N[1],Y=(0,u.useState)([]),K=v()(Y,2),U=K[0],A=K[1],W=(0,u.useState)(void 0),$=v()(W,2),ne=$[0],_=$[1],J=(0,u.useCallback)(m()(c()().mark(function j(){var z,O;return c()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(Z(!0),k.prev=1,!t){k.next=8;break}return k.next=5,a.getStepFiles(n,t);case 5:z=k.sent,k.next=11;break;case 8:return k.next=10,a.getSessionArtifacts(n);case 10:z=k.sent;case 11:O=function ae(oe){var ve=oe.sort(function(ge,Oe){return!ge.isLeaf&&Oe.isLeaf?-1:ge.isLeaf&&!Oe.isLeaf?1:ge.title.localeCompare(Oe.title)});return ve.map(function(ge){return{key:ge.key,title:ge.title,path:ge.path,isLeaf:ge.isLeaf,size:ge.size,modified:ge.modified,children:ge.children?ae(ge.children):void 0,icon:ge.isLeaf?"\u{1F4C4}":"\u{1F4C1}"}})},T(O(z.tree)),k.next=18;break;case 15:k.prev=15,k.t0=k.catch(1),console.error("Failed to load files:",k.t0);case 18:return k.prev=18,Z(!1),k.finish(18);case 21:case"end":return k.stop()}},j,null,[[1,15,18,21]])})),[n,t,a]),he=function(){J()};(0,u.useEffect)(function(){J()},[J,P]);var ee=function(z,O){var q=O.node;if(q.isLeaf&&(S(q.path),!t)){var k,ae=O==null||(k=O.node)===null||k===void 0?void 0:k.pos;if(ae&&typeof ae=="string"){var oe=ae.split("-");if(oe.length>1){var ve=Number(oe[1]);if(!Number.isNaN(ve)&&R[ve]){var ge=R[ve];_(String(ge.title))}}}else if(q.path){var Oe=q.path.split("/").filter(Boolean);Oe.length>0&&_(Oe[0])}}},C=function(z){A(z)},Be=function(z){return z?z<1024?"".concat(z," B"):z<1024*1024?"".concat((z/1024).toFixed(1)," KB"):"".concat((z/1024/1024).toFixed(1)," MB"):"-"};return(0,e.jsxs)("div",{className:"biominer-file-browser ".concat(o?"embedded":""),children:[!o&&(0,e.jsxs)("div",{className:"biominer-file-browser-header",children:[(0,e.jsxs)("h3",{children:["\u{1F4C1} File browser - Step ",(r=t!=null?t:ne)!==null&&r!==void 0?r:"All steps"]}),(0,e.jsxs)("div",{className:"header-actions",children:[(0,e.jsx)("button",{className:"biominer-button small",onClick:he,disabled:I,title:I?"Loading...":"Refresh file tree",children:"\u{1F504} Refresh"}),d&&(0,e.jsx)("button",{className:"biominer-button small",onClick:d,children:"\u2715 Close"})]})]}),(0,e.jsxs)("div",{className:"biominer-file-browser-body",children:[(0,e.jsx)("div",{className:"biominer-file-browser-sidebar",children:I?(0,e.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(0,e.jsx)(Ye.Z,{tip:"Loading..."})}):R.length===0?(0,e.jsx)(Qt.Z,{description:"No files"}):(0,e.jsx)(hr.Z,{showIcon:!0,showLine:!0,treeData:R,expandedKeys:U,onExpand:C,onSelect:ee,style:{backgroundColor:"var(--jp-layout-color1)"}})}),(0,e.jsx)("div",{className:"biominer-file-browser-content",children:E?(0,e.jsx)(qr,{sessionId:n,stepId:t!=null?t:ne,filePath:E,apiClient:a}):(0,e.jsx)("div",{className:"biominer-empty-state",children:(0,e.jsx)("p",{children:"Please select a file from the left"})})})]})]})}function Ar(i){var r=i.step,n=i.sessionId,t=i.apiClient,a=i.isExecuting,d=i.isStopping,l=i.isDeleting,o=i.loading,g=i.onExecute,P=i.onStop,M=i.onDelete,s=i.defaultActiveTab,I=s===void 0?"files":s,Z=(0,u.useState)(I),B=v()(Z,2),V=B[0],R=B[1],T=(0,u.useState)(""),w=v()(T,2),N=w[0],E=w[1];h(m()(c()().mark(function K(){return c()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:E("refresh-".concat(Date.now()));case 1:case"end":return A.stop()}},K)})),{interval:5e3,enabled:V==="files",runImmediately:!1});var S=function(){E("refresh-".concat(Date.now())),Se.ZP.success("Refreshed")},Y=[{key:"files",label:"\u{1F4C1} Files",children:(0,e.jsx)("div",{className:"biominer-expanded-tab-content",children:(0,e.jsx)(Tr,{sessionId:n,stepId:r.id,apiClient:t,embedded:!0,refreshKey:N})})},{key:"logs",label:"\u{1F4DD} Logs",children:(0,e.jsx)("div",{className:"biominer-expanded-tab-content",children:(0,e.jsx)(de,{sessionId:n,stepId:r.id,logType:"step",apiClient:t,height:"100%",showToolbar:!0,autoScroll:!0})})}];return(0,e.jsxs)("div",{className:"biominer-expanded-step-card",children:[(0,e.jsx)("div",{className:"biominer-expanded-left",children:(0,e.jsx)(bt,{step:r,sessionId:n,isExecuting:a,isStopping:d,isDeleting:l,loading:o,onExecute:g,onStop:P,onDelete:M,onView:function(){},compact:!0})}),(0,e.jsx)("div",{className:"biominer-expanded-right",children:(0,e.jsx)(wt.Z,{activeKey:V,onChange:R,items:Y,tabBarExtraContent:(0,e.jsx)(le.ZP,{type:"primary",size:"small",onClick:S,icon:(0,e.jsx)(tt.Z,{}),disabled:V!=="files",children:"Refresh"}),className:"biominer-expanded-tabs"})})]})}var nt=f(55247);function Vt(i){var r=i.sessionId,n=i.apiClient,t=i.sessionState,a=i.hasGoal,d=i.onUpdate,l=i.compact,o=(0,u.useState)(null),g=v()(o,2),P=g[0],M=g[1],s=(0,u.useState)(!1),I=v()(s,2),Z=I[0],B=I[1],V=(0,u.useState)(null),R=v()(V,2),T=R[0],w=R[1],N=(0,u.useState)(!0),E=v()(N,2),S=E[0],Y=E[1],K=(0,u.useState)(!1),U=v()(K,2),A=U[0],W=U[1],$=(0,u.useState)(new Set),ne=v()($,2),_=ne[0],J=ne[1],he=(0,u.useState)(new Set),ee=v()(he,2),C=ee[0],Be=ee[1],j=(0,u.useState)(new Set),z=v()(j,2),O=z[0],q=z[1],k=(0,u.useState)(!1),ae=v()(k,2),oe=ae[0],ve=ae[1],ge=(0,u.useState)(!1),Oe=v()(ge,2),ue=Oe[0],te=Oe[1],be=(0,u.useState)(null),ce=v()(be,2),F=ce[0],Ae=ce[1],Dt=(0,u.useState)(null),He=v()(Dt,2),Ce=He[0],ft=He[1],Ge=(0,u.useCallback)(m()(c()().mark(function se(){var x;return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,n.getPlan(r);case 3:x=D.sent,M(x.plan),D.next=11;break;case 7:D.prev=7,D.t0=D.catch(0),console.log("Plan not found yet"),M(null);case 11:case"end":return D.stop()}},se,null,[[0,7]])})),[r,n]),X=(0,u.useCallback)(m()(c()().mark(function se(){var x;return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,n.getWorkflowState(r);case 3:x=D.sent,Y(x.can_edit_plan),W(x.has_running_steps),D.next=13;break;case 8:D.prev=8,D.t0=D.catch(0),console.error("Failed to load workflow state:",D.t0),Y(!1),W(!1);case 13:case"end":return D.stop()}},se,null,[[0,8]])})),[r,n]),Xe=xe(function(){Ge(),X()},500);(0,u.useEffect)(function(){if(t){var se=t.plan_status==="generating";B(se),t.plan_status==="completed"&&(Ge(),X()),t.execution_status!=="pending"&&Ge()}},[t]),(0,u.useEffect)(function(){Ge(),X()},[Ge,X]),h(m()(c()().mark(function se(){return c()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Ge();case 2:return L.next=4,X();case 4:case"end":return L.stop()}},se)})),{interval:Ft.STATUS_POLL_INTERVAL,enabled:!!P,onError:function(x){console.error("[PlanPanel] Polling error:",x)},runImmediately:!1});var Je=function(){var se=m()(c()().mark(function x(){var L;return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return B(!0),w(null),b.prev=2,b.next=5,n.generatePlan(r);case 5:return L=b.sent,M(L.plan),b.next=9,X();case 9:d(!0),b.next=15;break;case 12:b.prev=12,b.t0=b.catch(2),w(b.t0 instanceof Error?b.t0.message:"Failed to generate");case 15:return b.prev=15,B(!1),b.finish(15);case 18:case"end":return b.stop()}},x,null,[[2,12,15,18]])}));return function(){return se.apply(this,arguments)}}(),zt=function(){var se=m()(c()().mark(function x(L){var D;return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return B(!0),w(null),ve(!1),y.prev=3,y.next=6,n.generatePlan(r,{feedback:L});case 6:return D=y.sent,M(D.plan),y.next=10,X();case 10:d(!0),y.next=16;break;case 13:y.prev=13,y.t0=y.catch(3),w(y.t0 instanceof Error?y.t0.message:"Failed to regenerate");case 16:return y.prev=16,B(!1),y.finish(16);case 19:case"end":return y.stop()}},x,null,[[3,13,16,19]])}));return function(L){return se.apply(this,arguments)}}(),Ke=function(){var se=m()(c()().mark(function x(){var L;return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return B(!0),w(null),b.prev=2,b.next=5,n.cleanNonPendingSteps(r);case 5:return L=b.sent,b.next=8,X();case 8:return b.next=10,Ge();case 10:Se.ZP.success("Cleaned ".concat(L.cleaned_count," steps")),b.next=16;break;case 13:b.prev=13,b.t0=b.catch(2),w(b.t0 instanceof Error?b.t0.message:"Failed to clean");case 16:return b.prev=16,B(!1),b.finish(16);case 19:case"end":return b.stop()}},x,null,[[2,13,16,19]])}));return function(){return se.apply(this,arguments)}}(),Ve=function(){var se=m()(c()().mark(function x(L){return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return J(function(y){return new Set(y).add(L)}),w(null),b.prev=2,b.next=5,n.executeStep(r,L);case 5:Xe(),b.next=11;break;case 8:b.prev=8,b.t0=b.catch(2),Se.ZP.error(b.t0 instanceof Error?b.t0.message:"Failed to start execution");case 11:return b.prev=11,J(function(y){var Ne=new Set(y);return Ne.delete(L),Ne}),b.finish(11);case 14:case"end":return b.stop()}},x,null,[[2,8,11,14]])}));return function(L){return se.apply(this,arguments)}}(),cr=function(){var se=m()(c()().mark(function x(){return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return B(!0),w(null),D.prev=2,D.next=5,n.deletePlan(r);case 5:return D.next=7,X();case 7:return D.next=9,Ge();case 9:d(!0),Se.ZP.success("Plan deleted successfully"),D.next=16;break;case 13:D.prev=13,D.t0=D.catch(2),w(D.t0 instanceof Error?D.t0.message:"Failed to delete");case 16:return D.prev=16,B(!1),D.finish(16);case 19:case"end":return D.stop()}},x,null,[[2,13,16,19]])}));return function(){return se.apply(this,arguments)}}(),St=function(){var se=m()(c()().mark(function x(L){return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Be(function(y){return new Set(y).add(L)}),w(null),b.prev=2,b.next=5,n.stopStep(r,L);case 5:Xe(),b.next=11;break;case 8:b.prev=8,b.t0=b.catch(2),w(b.t0 instanceof Error?b.t0.message:"Failed to stop");case 11:return b.prev=11,Be(function(y){var Ne=new Set(y);return Ne.delete(L),Ne}),b.finish(11);case 14:case"end":return b.stop()}},x,null,[[2,8,11,14]])}));return function(L){return se.apply(this,arguments)}}(),Ht=function(){var se=m()(c()().mark(function x(L){return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return q(function(y){return new Set(y).add(L)}),w(null),b.prev=2,b.next=5,n.deleteStep(r,L);case 5:Se.ZP.success("Step execution result cleared"),Xe(),b.next=12;break;case 9:b.prev=9,b.t0=b.catch(2),Se.ZP.error(b.t0 instanceof Error?b.t0.message:"Failed to clear step execution result.");case 12:return b.prev=12,q(function(y){var Ne=new Set(y);return Ne.delete(L),Ne}),b.finish(12);case 15:case"end":return b.stop()}},x,null,[[2,9,12,15]])}));return function(L){return se.apply(this,arguments)}}(),lt=function(x){ft(x)},et=P==null?void 0:P.steps.find(function(se){return se.id===Ce});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Re,{open:oe,title:"Regenerate Plan",onConfirm:zt,onCancel:function(){return ve(!1)},loading:Z}),(0,e.jsx)(jt,{open:ue,title:"Plan Generation Logs",sessionId:r,logType:"plan",apiClient:n,onClose:function(){return te(!1)}}),F&&(0,e.jsx)(jt,{open:!0,title:"Step ".concat(F," Logs"),sessionId:r,stepId:F,logType:"step",apiClient:n,onClose:function(){return Ae(null)}}),(0,e.jsxs)("div",{className:"biominer-panel-content",children:[(0,e.jsxs)("div",{className:"biominer-panel-header",children:[(0,e.jsx)("h3",{children:"\u{1F4CB} Plan & Run"}),(0,e.jsx)("div",{className:"biominer-panel-actions",children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Me.Z,{title:"View Plan generation logs",children:(0,e.jsx)(le.ZP,{size:"small",onClick:function(){return te(!0)},title:"View Plan generation logs",children:l?(0,e.jsx)(mt.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(mt.Z,{}),"Logs"]})})}),(0,e.jsx)(it.Z,{title:"Delete Plan and all steps",onConfirm:cr,disabled:Z||!P,children:(0,e.jsx)(Me.Z,{title:"Delete Plan and all steps",children:(0,e.jsx)(le.ZP,{danger:!0,disabled:Z||!P,size:"small",children:l?(0,e.jsx)(qe.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qe.Z,{}),"Delete"]})})})}),(0,e.jsx)(it.Z,{title:"Clean all executed steps",onConfirm:Ke,disabled:Z||!A,children:(0,e.jsx)(Me.Z,{title:"Clean all executed steps",children:(0,e.jsx)(le.ZP,{size:"small",danger:!0,disabled:Z||!A,children:l?(0,e.jsx)(nt.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(nt.Z,{}),"Clean"]})})})}),(0,e.jsx)(Me.Z,{title:"Regenerate Plan",children:(0,e.jsx)(le.ZP,{size:"small",onClick:function(){return ve(!0)},disabled:Z||!a||!S||!P,title:S?"":"There are steps running, cannot regenerate",children:l?(0,e.jsx)(tt.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(tt.Z,{}),"Regenerate"]})})})]})})]}),(0,e.jsx)(Ye.Z,{spinning:Z,children:(0,e.jsxs)("div",{className:"biominer-panel-body",children:[T&&(0,e.jsx)("div",{className:"biominer-error",children:T}),a?P?(0,e.jsxs)("div",{className:"biominer-plan-content",children:[(0,e.jsxs)("div",{className:"biominer-plan-meta",children:["Version: v",P.version," | Status: ",P.status," | Steps: ",P.steps.length,A&&(0,e.jsxs)("span",{style:{color:"var(--jp-warn-color1)",marginLeft:8},children:["\u26A0\uFE0F Steps executed",(t==null?void 0:t.total_duration_seconds)>0&&(0,e.jsxs)(e.Fragment,{children:[" (Total: \u23F1\uFE0F ",We(t.total_duration_seconds),")"]})]})]}),(0,e.jsx)("div",{className:"biominer-steps-list",children:P.steps.map(function(se){return(0,e.jsx)(bt,{step:se,sessionId:r,isExecuting:_.has(se.id),isStopping:C.has(se.id),isDeleting:O.has(se.id),loading:Z,onExecute:Ve,onStop:St,onDelete:Ht,onView:lt},se.id)})})]}):(0,e.jsxs)("div",{className:"biominer-empty-state",children:[(0,e.jsx)("p",{children:"Please generate the plan first"}),(0,e.jsx)(le.ZP,{type:"primary",onClick:Je,disabled:Z,children:Z?"Generating...":"Generate plan"})]}):(0,e.jsx)("div",{className:"biominer-empty-state",children:(0,e.jsx)("p",{children:"Please generate the goal first."})})]})})]}),(0,e.jsx)(rt.Z,{title:et?"".concat(et.id," - ").concat(et.title):"",open:!!Ce,onCancel:function(){return ft(null)},footer:null,width:"95%",style:{top:20},styles:{body:{height:"calc(100vh - 210px)"}},getContainer:function(){return document.getElementById("biominer-dataflow-root")},destroyOnHidden:!0,children:et&&(0,e.jsx)(Ar,{step:et,sessionId:r,apiClient:n,isExecuting:_.has(et.id),isStopping:C.has(et.id),isDeleting:O.has(et.id),loading:Z,onExecute:Ve,onStop:St,onDelete:Ht,defaultActiveTab:"files"})})]})}var Ir=f(66309);function Or(i){var r=i.sessionId,n=i.apiClient,t=i.hasPlan,a=(0,u.useState)(""),d=v()(a,2),l=d[0],o=d[1],g=(0,u.useState)(!0),P=v()(g,2),M=P[0],s=P[1],I=(0,u.useState)([]),Z=v()(I,2),B=Z[0],V=Z[1],R=(0,u.useRef)(null);(0,u.useEffect)(function(){M&&R.current&&setTimeout(function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)},0)},[l,M]);var T=(0,u.useCallback)(m()(c()().mark(function E(){var S,Y,K;return c()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(t){A.next=2;break}return A.abrupt("return");case 2:return A.prev=2,A.next=5,n.getSteps(r);case 5:S=A.sent,Y=S.steps,K=Y.map(function(W){return W.id}),V(K),A.next=14;break;case 11:A.prev=11,A.t0=A.catch(2),console.error("Failed to load steps:",A.t0);case 14:case"end":return A.stop()}},E,null,[[2,11]])})),[r,n,t]),w=(0,u.useCallback)(m()(c()().mark(function E(){var S,Y,K;return c()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(A.prev=0,S="",!(B.length>0)){A.next=8;break}return Y=B.map(function(W){return n.getStepLogs(r,W).catch(function(){return null})}),A.next=6,Promise.all(Y);case 6:K=A.sent,K.forEach(function(W,$){W&&W.logs&&(S+=`
=== \u2699\uFE0F STEP `.concat(B[$]," (").concat(W.status,`) ===
`),S+=W.logs,W.error&&(S+=`
Error: `.concat(W.error,`
`)))});case 8:o(S),A.next=14;break;case 11:A.prev=11,A.t0=A.catch(0),console.error("Failed to load logs:",A.t0);case 14:case"end":return A.stop()}},E,null,[[0,11]])})),[r,n,B]),N=function(){o("")};return(0,u.useEffect)(function(){T()},[T]),(0,u.useEffect)(function(){w()},[w]),h(m()(c()().mark(function E(){return c()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,w();case 2:case"end":return Y.stop()}},E)})),{interval:Ft.LOG_POLL_INTERVAL,enabled:t&&B.length>0,onError:function(S){console.error("[RunPanel] Polling error:",S)},runImmediately:!1}),(0,e.jsxs)("div",{className:"biominer-panel-content",children:[(0,e.jsxs)("div",{className:"biominer-panel-header",children:[(0,e.jsx)("h3",{children:"\u{1F504} Run Logs"}),(0,e.jsxs)("div",{className:"biominer-panel-actions",children:[(0,e.jsx)(Me.Z,{title:"Clear all logs",children:(0,e.jsxs)(le.ZP,{danger:!0,size:"small",onClick:N,disabled:!l,title:"Clear all logs",children:[(0,e.jsx)(qe.Z,{})," Clear"]})}),(0,e.jsxs)("label",{className:"biominer-checkbox-label",children:[(0,e.jsx)("input",{type:"checkbox",checked:M,onChange:function(S){return s(S.target.checked)}}),(0,e.jsx)("span",{children:"Auto Scroll"})]})]})]}),(0,e.jsxs)("div",{className:"biominer-panel-body",children:[(0,e.jsxs)("div",{className:"biominer-log-info",children:["\u{1F4A1} Tip: This panel shows real-time logs for ",(0,e.jsx)(Ir.Z,{color:"blue",children:"All Step Executions"}),' Logs are automatically refreshed. If you want to view the logs for Goal generation or Plan generation, you can click the "View Logs" button in the Goal or Plan panel.']}),t?(0,e.jsx)("div",{ref:R,className:"biominer-log-container",children:l||(0,e.jsxs)("div",{className:"biominer-empty-state",children:[(0,e.jsx)("p",{children:"No logs yet"}),(0,e.jsx)("small",{children:'Click the "\u25B6 Execute" button to start execution'})]})}):(0,e.jsx)("div",{className:"biominer-empty-state",children:(0,e.jsx)("p",{children:"Please generate a plan first"})})]})]})}var rn=f(44209),nn=f(14079),an=f(55725),Mr=f(10981),yt="http://localhost:8888/biominer-dataflow/api",Rr=function(){function i(r){st()(this,i),er()(this,"apiBase",void 0),er()(this,"customToken",void 0),this.apiBase=(r==null?void 0:r.api_url)||yt,this.customToken=(r==null?void 0:r.token)||null}return ht()(i,[{key:"getURL",value:function(n){return"".concat(this.apiBase,"/").concat(n)}},{key:"buildURL",value:function(n){return this.getURL(n)}},{key:"getBaseURL",value:function(){return this.apiBase}},{key:"request",value:function(){var r=m()(c()().mark(function t(a){var d,l,o,g,P,M=arguments;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return d=M.length>1&&M[1]!==void 0?M[1]:{},l=this.getURL(a),o=this.customToken||(0,Mr.bW)()||"",I.next=5,fetch(l,ke()(ke()({},d),{},{headers:ke()({"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},d.headers)}));case 5:if(g=I.sent,g.ok){I.next=11;break}return I.next=9,g.json().catch(function(){return{}});case 9:throw P=I.sent,new Error(P.error||"Request failed: ".concat(g.statusText));case 11:if(g.status!==204){I.next=13;break}return I.abrupt("return",{});case 13:return I.abrupt("return",g.json());case 14:case"end":return I.stop()}},t,this)}));function n(t){return r.apply(this,arguments)}return n}()}]),i}(),sr=f(94272);function zr(){return ir.apply(this,arguments)}function ir(){return ir=m()(c()().mark(function i(){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,sr.request)("/api/v1/datasets",{method:"GET"}));case 1:case"end":return n.stop()}},i)})),ir.apply(this,arguments)}function lr(){return Rt.apply(this,arguments)}function Rt(){return Rt=m()(c()().mark(function i(){var r,n,t=arguments;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=t.length>0&&t[0]!==void 0?t[0]:3,d.prev=1,n=localStorage.getItem("recent_datasets"),d.abrupt("return",n?JSON.parse(n).slice(0,r):[]);case 6:return d.prev=6,d.t0=d.catch(1),console.error("Failed to load recent datasets:",d.t0),d.abrupt("return",[]);case 10:case"end":return d.stop()}},i,null,[[1,6]])})),Rt.apply(this,arguments)}function kt(){return Ut.apply(this,arguments)}function Ut(){return Ut=m()(c()().mark(function i(){var r;return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=localStorage.getItem("favorite_datasets"),t.abrupt("return",r?JSON.parse(r):[]);case 5:return t.prev=5,t.t0=t.catch(0),console.error("Failed to load favorite datasets:",t.t0),t.abrupt("return",[]);case 9:case"end":return t.stop()}},i,null,[[0,5]])})),Ut.apply(this,arguments)}function sn(i){try{localStorage.setItem("recent_datasets",JSON.stringify(i))}catch(r){console.error("Failed to save recent datasets:",r)}}function ln(i){try{var r=kt(),n=r.then(function(t){var a=t.indexOf(i);return a>=0?t.splice(a,1):t.push(i),t});n.then(function(t){localStorage.setItem("favorite_datasets",JSON.stringify(t))})}catch(t){console.error("Failed to toggle favorite dataset:",t)}}function on(){return or.apply(this,arguments)}function or(){return or=m()(c()().mark(function i(){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,sr.request)("/api/v1/jupyterhub/server/info",{method:"GET"}));case 1:case"end":return n.stop()}},i)})),or.apply(this,arguments)}function Br(i){return Wt.apply(this,arguments)}function Wt(){return Wt=m()(c()().mark(function i(r){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,sr.request)("/api/v1/jupyterhub/server/start",{method:"POST",data:r}));case 1:case"end":return t.stop()}},i)})),Wt.apply(this,arguments)}function fe(){return pe.apply(this,arguments)}function pe(){return pe=_asyncToGenerator(_regeneratorRuntime().mark(function i(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/jupyterhub/server/stop",{method:"POST"}));case 1:case"end":return n.stop()}},i)})),pe.apply(this,arguments)}function re(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,r=(0,u.useState)(null),n=v()(r,2),t=n[0],a=n[1],d=(0,u.useState)(!0),l=v()(d,2),o=l[0],g=l[1],P=(0,u.useState)(null),M=v()(P,2),s=M[0],I=M[1],Z=(0,u.useCallback)(m()(c()().mark(function B(){var V;return c()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,T.next=3,on();case 3:V=T.sent,a(V),I(null),T.next=11;break;case 8:T.prev=8,T.t0=T.catch(0),I(T.t0 instanceof Error?T.t0.message:"Failed to get Server status");case 11:return T.prev=11,g(!1),T.finish(11);case 14:case"end":return T.stop()}},B,null,[[0,8,11,14]])})),[]);return(0,u.useEffect)(function(){Z();var B=(t==null?void 0:t.status)==="starting"?2e3:i,V=setInterval(Z,B);return function(){return clearInterval(V)}},[t==null?void 0:t.status,i,Z]),{serverInfo:t,loading:o,error:s,refetch:Z}}var je=f(84567),$e=f(67841),H=function(r){var n=r.serverInfo,t=r.currentDatasetKey,a=(0,u.useState)(!1),d=v()(a,2),l=d[0],o=d[1],g=(0,u.useState)(!0),P=v()(g,2),M=P[0],s=P[1],I=(0,u.useState)([]),Z=v()(I,2),B=Z[0],V=Z[1],R=(0,u.useState)([]),T=v()(R,2),w=T[0],N=T[1],E=n.max_mounts;(0,u.useEffect)(function(){S()},[t]);var S=function(){var U=m()(c()().mark(function A(){var W,$,ne,_,J,he;return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,C.next=3,zr();case 3:return W=C.sent,V(W),$=new Set,t&&$.add(t),C.next=9,lr(3);case 9:return ne=C.sent,ne.forEach(function(Be){return $.add(Be)}),C.next=13,kt();case 13:_=C.sent,_.forEach(function(Be){return $.add(Be)}),J=Array.from($).filter(function(Be){return W.some(function(j){return j.key===Be})}),he=J.slice(0,E),N(he),C.next=23;break;case 20:C.prev=20,C.t0=C.catch(0),Se.ZP.error("Failed to load datasets: "+(C.t0 instanceof Error?C.t0.message:"Unknown error"));case 23:return C.prev=23,s(!1),C.finish(23);case 26:case"end":return C.stop()}},A,null,[[0,20,23,26]])}));return function(){return U.apply(this,arguments)}}(),Y=function(A,W){if(W){if(w.length>=E){Se.ZP.warning("Maximum ".concat(E," datasets can be selected"));return}N([].concat(ze()(w),[A]))}else N(w.filter(function($){return $!==A}))},K=function(){var U=m()(c()().mark(function A(){return c()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(w.length!==0){$.next=3;break}return Se.ZP.warning("Please select at least one dataset"),$.abrupt("return");case 3:return o(!0),$.prev=4,$.next=7,Br({dataset_keys:w});case 7:sn(w),Se.ZP.success("Server is starting..."),$.next=15;break;case 11:$.prev=11,$.t0=$.catch(4),Se.ZP.error("Failed to start: "+($.t0 instanceof Error?$.t0.message:"Unknown error")),o(!1);case 15:case"end":return $.stop()}},A,null,[[4,11]])}));return function(){return U.apply(this,arguments)}}();return(0,e.jsx)("div",{style:{padding:24,maxWidth:800,margin:"0 auto"},children:(0,e.jsxs)(Ot.Z,{children:[(0,e.jsxs)("div",{style:{textAlign:"center",marginBottom:24},children:[(0,e.jsx)($e.Z,{style:{fontSize:64,color:"#1890ff",marginBottom:16}}),(0,e.jsx)("h2",{children:"AI Copilot Server Not Started"})]}),n.error&&(0,e.jsx)(Ct.Z,{type:"error",message:n.error,style:{marginBottom:24}}),!n.error&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ct.Z,{type:"info",message:"Select datasets to mount",description:"Smart pre-selection has been applied. You can adjust the selection. Maximum ".concat(E," datasets can be selected."),style:{marginBottom:16}}),(0,e.jsx)("div",{style:{marginBottom:16},children:(0,e.jsxs)("strong",{children:["Selected: ",w.length," / ",E]})}),M?(0,e.jsx)("div",{style:{textAlign:"center",padding:40},children:(0,e.jsx)(Ye.Z,{})}):(0,e.jsx)("div",{style:{maxHeight:400,overflowY:"auto",border:"1px solid #d9d9d9",borderRadius:4,padding:16,marginBottom:24},children:B.map(function(U){return(0,e.jsxs)("div",{style:{marginBottom:8},children:[(0,e.jsxs)(je.Z,{checked:w.includes(U.key),onChange:function(W){return Y(U.key,W.target.checked)},disabled:!w.includes(U.key)&&w.length>=E,children:[(0,e.jsx)("strong",{children:U.key}),(0,e.jsxs)("span",{style:{color:"#999",marginLeft:8},children:["v",U.version]}),w.includes(U.key)&&t===U.key&&(0,e.jsx)("span",{style:{color:"#1890ff",marginLeft:8},children:"(current)"})]}),U.description&&(0,e.jsx)("div",{style:{marginLeft:24,color:"#666",fontSize:12},children:U.description})]},U.key)})}),(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(le.ZP,{type:"primary",size:"large",icon:(0,e.jsx)($e.Z,{}),onClick:K,loading:l,disabled:w.length===0||M,children:l?"Starting...":"Start AI Copilot Server"}),(0,e.jsx)("p",{style:{color:"#999",marginTop:16,fontSize:12},children:"Estimated startup time: 30-60 seconds"})]})]})]})})},me=H,Le=f(26410),Fr=f(79090),ur=function(){return(0,e.jsx)("div",{style:{padding:24,maxWidth:600,margin:"0 auto"},children:(0,e.jsx)(Ot.Z,{children:(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(Ye.Z,{indicator:(0,e.jsx)(Fr.Z,{style:{fontSize:64},spin:!0})}),(0,e.jsx)("h2",{style:{marginTop:24},children:"Server is Starting"}),(0,e.jsx)("p",{style:{color:"#666"},children:"Please wait, this may take 30-60 seconds..."}),(0,e.jsx)(Le.Z,{percent:50,status:"active",showInfo:!1,style:{marginTop:24}})]})})})},bn=ur;function wn(i){return i.embedded?(0,e.jsx)(gn,ke()({},i)):(0,e.jsx)(Cn,ke()({},i))}function Cn(i){var r=re(),n=r.serverInfo,t=r.loading,a=r.error;if(t)return(0,e.jsx)("div",{style:{padding:24,textAlign:"center"},children:(0,e.jsx)("p",{children:"Loading..."})});if(a||!n)return(0,e.jsx)("div",{style:{padding:24},children:(0,e.jsx)(Ct.Z,{type:"error",message:"Error",description:a||"Unable to get Server status"})});if(n.status==="stopped"||n.status==="failed"){var d;return(0,e.jsx)(me,{serverInfo:n,currentDatasetKey:(d=i.datasetKeyVersion)===null||d===void 0?void 0:d.split(":")[0]})}return n.status==="starting"?(0,e.jsx)(bn,{}):n.status==="ready"?(0,e.jsx)(gn,ke()(ke()({},i),{},{serverInfo:n})):(0,e.jsx)("div",{style:{padding:24},children:(0,e.jsx)(Ct.Z,{type:"warning",message:"Unknown server status"})})}function gn(i){var r;if(i.embedded&&!i.datasetKeyVersion)throw new Error("datasetKeyVersion is required when embedded is true");var n=(0,u.useState)(function(){if(i.serverInfo){var x=new Rr({api_url:i.serverInfo.agent_api_url,token:i.serverInfo.jupyter_token});return new ut(x)}else return new ut(new Rr)}),t=v()(n,1),a=t[0],d=(0,u.useState)(null),l=v()(d,2),o=l[0],g=l[1],P=(0,u.useState)([]),M=v()(P,2),s=M[0],I=M[1],Z=(0,u.useState)(""),B=v()(Z,2),V=B[0],R=B[1],T=(0,u.useState)(i.datasetKeyVersion||null),w=v()(T,2),N=w[0],E=w[1],S=(0,u.useState)([]),Y=v()(S,2),K=Y[0],U=Y[1],A=(0,u.useState)(!1),W=v()(A,2),$=W[0],ne=W[1],_=(0,u.useState)(null),J=v()(_,2),he=J[0],ee=J[1],C=(0,u.useState)(!0),Be=v()(C,2),j=Be[0],z=Be[1],O=(0,u.useState)(!1),q=v()(O,2),k=q[0],ae=q[1],oe=(0,u.useState)(!1),ve=v()(oe,2),ge=ve[0],Oe=ve[1],ue=(0,u.useState)(null),te=v()(ue,2),be=te[0],ce=te[1],F=(0,u.useState)(null),Ae=v()(F,2),Dt=Ae[0],He=Ae[1],Ce=(0,u.useState)("2-column"),ft=v()(Ce,2),Ge=ft[0],X=ft[1];(0,u.useEffect)(function(){var x=localStorage.getItem("biominer-dataflow-layout");x&&X(x)},[]),(0,u.useEffect)(function(){Xe()},[]);var Xe=function(){var x=m()(c()().mark(function L(){var D;return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,a.listSessions(i.datasetKeyVersion);case 3:D=y.sent,I(D.sessions),y.next=10;break;case 7:y.prev=7,y.t0=y.catch(0),console.error("Failed to load session list:",y.t0);case 10:case"end":return y.stop()}},L,null,[[0,7]])}));return function(){return x.apply(this,arguments)}}(),Je=function(){var x=m()(c()().mark(function L(){var D;return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(N){y.next=3;break}return ee("Please select a dataset"),y.abrupt("return");case 3:if(V.trim()){y.next=6;break}return ee("Please enter a requirement description"),y.abrupt("return");case 6:return ne(!0),ee(null),y.prev=8,y.next=11,a.createSession(V,{dataset_key_version:N});case 11:return D=y.sent,g(D),R(""),y.next=16,Xe();case 16:y.next=21;break;case 18:y.prev=18,y.t0=y.catch(8),ee(y.t0 instanceof Error?y.t0.message:"Failed to create session");case 21:return y.prev=21,ne(!1),y.finish(21);case 24:case"end":return y.stop()}},L,null,[[8,18,21,24]])}));return function(){return x.apply(this,arguments)}}(),zt=function(){var x=m()(c()().mark(function L(D){var b,y;return c()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.prev=0,ye.next=3,a.getSession(D);case 3:return b=ye.sent,g(b),ye.next=7,a.getSessionContext(D);case 7:y=ye.sent,ce(y),ye.next=14;break;case 11:ye.prev=11,ye.t0=ye.catch(0),ee(ye.t0 instanceof Error?ye.t0.message:"Failed to switch session");case 14:case"end":return ye.stop()}},L,null,[[0,11]])}));return function(D){return x.apply(this,arguments)}}();(0,u.useEffect)(function(){o?Ke():ce(null)},[o==null?void 0:o.id]);var Ke=function(){var x=m()(c()().mark(function L(){var D;return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(o){y.next=2;break}return y.abrupt("return");case 2:return y.prev=2,y.next=5,a.getSessionContext(o.id);case 5:D=y.sent,ce(D),y.next=12;break;case 9:y.prev=9,y.t0=y.catch(2),console.error("Failed to load session context:",y.t0);case 12:case"end":return y.stop()}},L,null,[[2,9]])}));return function(){return x.apply(this,arguments)}}(),Ve=function(){var x=m()(c()().mark(function L(){var D;return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(o){y.next=2;break}return y.abrupt("return");case 2:return y.prev=2,y.next=5,a.getSessionState(o.id);case 5:D=y.sent,He(D),y.next=12;break;case 9:y.prev=9,y.t0=y.catch(2),console.error("Failed to load session state:",y.t0);case 12:case"end":return y.stop()}},L,null,[[2,9]])}));return function(){return x.apply(this,arguments)}}();(0,u.useEffect)(function(){He(null),o&&Ve()},[o==null?void 0:o.id]),h(m()(c()().mark(function x(){return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Ve();case 2:case"end":return D.stop()}},x)})),{interval:2e3,enabled:!!o,onError:function(L){console.error("[DataFlowApp] Polling error:",L)},runImmediately:!1});var cr=function(){var x=m()(c()().mark(function L(D,b){return c()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return b.stopPropagation(),Ne.prev=1,Ne.next=4,a.deleteSession(D);case 4:return(o==null?void 0:o.id)===D&&(g(null),R(""),E(null)),Ne.next=7,Xe();case 7:Ne.next=12;break;case 9:Ne.prev=9,Ne.t0=Ne.catch(1),ee(Ne.t0 instanceof Error?Ne.t0.message:"Failed to delete session");case 12:case"end":return Ne.stop()}},L,null,[[1,9]])}));return function(D,b){return x.apply(this,arguments)}}(),St=function(){var x=m()(c()().mark(function L(){var D,b,y=arguments;return c()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(D=y.length>0&&y[0]!==void 0?y[0]:!1,!(!(o!=null&&o.id)&&!D)){ye.next=3;break}return ye.abrupt("return");case 3:return ye.prev=3,ye.next=6,a.getSession((o==null?void 0:o.id)||"");case 6:b=ye.sent,g(b),ye.next=13;break;case 10:ye.prev=10,ye.t0=ye.catch(3),ee(ye.t0 instanceof Error?ye.t0.message:"Failed to refresh session");case 13:case"end":return ye.stop()}},L,null,[[3,10]])}));return function(){return x.apply(this,arguments)}}(),Ht=function(){g(null),R(""),i.embedded&&i.datasetKeyVersion?E(i.datasetKeyVersion):E(null),ee(null)},lt=(r=i.datasetKeyVersion)===null||r===void 0?void 0:r.split(":")[0],et=i.serverInfo?i.serverInfo.mounted_datasets.some(function(x){return x.key===lt}):!0,se=i.serverInfo&&i.serverInfo.status==="ready";return(0,e.jsxs)("div",{className:"biominer-dataflow-root ".concat(i.embedded?"embedded":""),id:"biominer-dataflow-root",children:[(0,e.jsxs)("div",{className:"biominer-sidebar ".concat(j?"open":"closed"),children:[(0,e.jsx)("button",{className:"biominer-sidebar-toggle",onClick:function(){return z(!j)},title:j?"Collapse sidebar":"Expand sidebar",children:j?"\u25C0":"\u25B6"}),j&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"biominer-sidebar-header",children:(0,e.jsx)("h3",{children:"\u{1F4DA} Session history"})}),(0,e.jsxs)("div",{className:"biominer-sidebar-content",children:[(0,e.jsxs)(le.ZP,{type:"primary",onClick:Ht,children:[(0,e.jsx)(rn.Z,{})," New session"]}),(0,e.jsx)("div",{className:"biominer-sessions-list",children:s.length===0?(0,e.jsx)("div",{className:"biominer-empty-hint",children:"No session"}):s.map(function(x){return(0,e.jsx)("div",{className:"biominer-session-item ".concat((o==null?void 0:o.id)===x.id?"active":""),onClick:function(){return zt(x.id)},children:(0,e.jsxs)("div",{className:"biominer-session-content",children:[(0,e.jsxs)("div",{className:"biominer-session-title",children:[x.requirement.substring(0,50),x.requirement.length>50?"...":""]}),(0,e.jsxs)("div",{className:"biominer-session-meta",children:[(0,e.jsx)("span",{className:"biominer-session-date",children:new Date(x.created_at).toLocaleDateString()}),(0,e.jsxs)("div",{className:"biominer-session-actions",children:[(0,e.jsx)(Ir.Z,{color:x.status==="draft"?"warning":x.status==="running"?"processing":x.status==="completed"?"success":x.status==="failed"?"error":"default",className:"biominer-session-status status-".concat(x.status||"draft"),children:x.status||"draft"}),(0,e.jsx)(it.Z,{title:"Delete Session",description:"Are you sure you want to delete the session? This action cannot be undone.",onConfirm:function(D){return cr(x.id,D)},okText:"Delete",okType:"danger",cancelText:"Cancel",children:(0,e.jsx)(Me.Z,{title:"Delete session",children:(0,e.jsx)(le.ZP,{className:"biominer-session-delete",icon:(0,e.jsx)(qe.Z,{}),type:"primary",danger:!0,size:"small"})})})]})]})]})},x.id)})})]})]})]}),(0,e.jsxs)("div",{className:"biominer-dataflow-container",children:[(0,e.jsxs)("div",{className:"biominer-dataflow-header",children:[(0,e.jsxs)("div",{className:"biominer-header-left",children:[(0,e.jsxs)("h2",{children:[(0,e.jsx)("img",{src:f(50025).Z,alt:"BioMiner DataFlow",style:{width:"24px",height:"24px",marginRight:"8px"}}),"BioMiner DataFlow"]}),o&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Me.Z,{title:"View all files in current session",children:(0,e.jsx)(le.ZP,{type:"primary",icon:(0,e.jsx)(mt.Z,{}),onClick:function(){return Oe(!0)},size:"small",style:{marginLeft:"12px"},children:"View Files"})}),(0,e.jsx)(Me.Z,{title:(o==null?void 0:o.requirement)||"No requirement",children:(0,e.jsx)(le.ZP,{type:"default",icon:(0,e.jsx)(nn.Z,{}),size:"small",style:{marginLeft:"12px"},children:"View Requirement"})}),(0,e.jsx)(Me.Z,{title:"Switch between 2-column and 3-column layout",children:(0,e.jsx)(_e.default,{size:"small",value:Ge,onChange:function(L){X(L),localStorage.setItem("biominer-dataflow-layout",L)},style:{width:120,marginLeft:"12px"},options:[{value:"2-column",label:"2 Columns"},{value:"3-column",label:"3 Columns"}]})})]})]}),(0,e.jsx)("div",{className:"biominer-dataflow-breadcrumb",children:o&&(0,e.jsxs)(e.Fragment,{children:[(be==null?void 0:be.data_directory)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Me.Z,{title:"Working Directory: ".concat(be.data_directory),children:(0,e.jsxs)(le.ZP,{danger:!0,size:"small",children:[(0,e.jsx)(an.Z,{})," Data Directory"]})}),(0,e.jsx)("span",{children:"\u2192"})]}),(0,e.jsx)("span",{className:"active",children:"Goal"}),(0,e.jsx)("span",{children:"\u2192"}),(0,e.jsx)("span",{children:"Plan"}),(0,e.jsx)("span",{children:"\u2192"}),(0,e.jsx)("span",{children:"Run"}),(0,e.jsx)("span",{children:"\u2192"}),(0,e.jsx)("span",{children:"Logs & Artifacts"})]})})]}),se&&!i.embedded&&(0,e.jsx)("div",{style:{padding:"0 24px",marginTop:16},children:(0,e.jsx)(Ct.Z,{type:"info",message:"Currently ".concat(i.serverInfo.mounted_datasets.length," dataset(s) mounted"),description:(0,e.jsxs)(e.Fragment,{children:["If you need to use other datasets, please stop the Server first, then restart and select datasets.",(0,e.jsx)("br",{}),(0,e.jsxs)("span",{style:{fontSize:12,color:"#999"},children:["Mounted datasets: ",i.serverInfo.mounted_datasets.map(function(x){return x.key}).join(", ")]})]}),closable:!0})}),i.embedded&&!et?(0,e.jsxs)("div",{style:{padding:24},children:[(0,e.jsx)(Ct.Z,{type:"warning",message:"Current dataset not mounted",description:(0,e.jsxs)(e.Fragment,{children:["Current dataset ",(0,e.jsx)("strong",{children:lt})," is not mounted to the Server, cannot create new analysis tasks.",(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),"Please return to the ",(0,e.jsx)("a",{href:"/copilot",children:"AI Copilot page"}),", stop the Server, then restart and select datasets."]}),showIcon:!0}),(0,e.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:(0,e.jsx)(le.ZP,{type:"primary",disabled:!0,children:"New Session (Dataset not mounted)"})})]}):(0,e.jsx)(e.Fragment,{children:o?(0,e.jsxs)("div",{className:"biominer-dataflow-workspace layout-".concat(Ge),children:[(0,e.jsx)("div",{className:"biominer-dataflow-panel",children:(0,e.jsx)(At,{sessionId:o.id,apiClient:a,sessionState:Dt,onUpdate:St,compact:Ge==="3-column"})}),(0,e.jsx)("div",{className:"biominer-dataflow-panel",children:(0,e.jsx)(Vt,{sessionId:o.id,apiClient:a,sessionState:Dt,hasGoal:o.has_goal,onUpdate:St,compact:Ge==="3-column"})}),Ge==="3-column"&&(0,e.jsx)("div",{className:"biominer-dataflow-panel",children:(0,e.jsx)(Or,{sessionId:o.id,apiClient:a,hasPlan:o.has_plan})})]}):(0,e.jsx)("div",{className:"biominer-dataflow-welcome",children:(0,e.jsxs)("div",{className:"biominer-dataflow-form",children:[(0,e.jsxs)("div",{className:"biominer-form-header",children:[(0,e.jsx)("h2",{children:"Create new session"}),(0,e.jsx)("p",{className:"biominer-form-subtitle",children:"Configure the working environment and describe your analysis requirements, AI will generate an intelligent execution plan for you"})]}),(0,e.jsxs)("div",{className:"biominer-form-card",style:{display:i.datasetKeyVersion?"none":"block"},children:[(0,e.jsxs)("div",{className:"biominer-form-card-header",children:[(0,e.jsxs)("div",{className:"biominer-form-card-header-left",children:[(0,e.jsx)("div",{className:"biominer-step-badge",children:"1"}),(0,e.jsxs)("div",{className:"biominer-form-card-title",children:[(0,e.jsxs)("h4",{children:["Select dataset ",(0,e.jsx)("span",{className:"required",children:"*"})]}),(0,e.jsx)("p",{children:"Browse and select the dataset to be analyzed"})]})]}),(0,e.jsx)("div",{style:{float:"right"},className:"biominer-form-card-actions",children:(0,e.jsx)(le.ZP,{type:"primary",onClick:function(){return ae(!0)},children:"Browse Dataset"})})]}),(0,e.jsx)("div",{className:"biominer-form-card-body",children:K.length>0&&(0,e.jsxs)("div",{className:"biominer-input-status success",children:["\u2713 Dataset is selected ( ",K[0].name," )."]})})]}),(0,e.jsxs)("div",{className:"biominer-form-card ".concat(N?"":"disabled"),children:[(0,e.jsxs)("div",{className:"biominer-form-card-header",children:[(0,e.jsx)("div",{className:"biominer-step-badge",children:i.datasetKeyVersion?"1":"2"}),(0,e.jsxs)("div",{className:"biominer-form-card-title",children:[(0,e.jsxs)("h4",{children:["Enter your requirement ",(0,e.jsx)("span",{className:"required",children:"*"})]}),(0,e.jsx)("p",{children:"Describe the task you want to complete, AI will help you generate a detailed execution plan"})]})]}),(0,e.jsxs)("div",{className:"biominer-form-card-body",children:[(0,e.jsxs)("div",{className:"biominer-input-wrapper",children:[(0,e.jsx)("span",{className:"biominer-input-icon top",children:"\u270F\uFE0F"}),(0,e.jsx)("textarea",{className:"biominer-dataflow-textarea modern",placeholder:`For example: analyze the sales.csv file, find the sales trend and generate a report Tips: You can describe in detail:
\u2022 The data files to be processed
\u2022 The expected analysis type
\u2022 The required output format`,value:V,onChange:function(L){return R(L.target.value)},rows:8,disabled:$||!N})]}),V&&N&&(0,e.jsxs)("div",{className:"biominer-input-status success",children:["\u2713 Requirement is filled ( ",V.length," characters )."]})]})]}),he&&(0,e.jsxs)("div",{className:"biominer-dataflow-error modern",children:[(0,e.jsx)("span",{className:"error-icon",children:"\u26A0\uFE0F"}),he]}),(0,e.jsx)("div",{className:"biominer-form-actions",children:(0,e.jsx)("button",{className:"biominer-dataflow-button primary large",onClick:Je,disabled:$||!V.trim()||!N,children:$?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"loading-spinner",children:"\u23F3"}),"Creating..."]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"button-icon",children:"\u{1F680}"}),"Start analysis"]})})})]})})})]}),ge&&(0,e.jsx)(rt.Z,{title:"Session File Browser - All steps",open:ge,onCancel:function(){return Oe(!1)},footer:null,width:"90%",height:"80vh",style:{top:20,maxHeight:"80vh"},styles:{body:{height:"100%"}},getContainer:!1,destroyOnClose:!0,children:o&&(0,e.jsx)(Tr,{sessionId:o.id,apiClient:a,onClose:function(){return Oe(!1)}})}),k&&(0,e.jsx)(rt.Z,{open:k,onCancel:function(){return ae(!1)},footer:(0,e.jsx)(le.ZP,{type:"default",onClick:function(){E(null),ae(!1)},children:"Clear Selection"}),destroyOnHidden:!0,title:null,width:"80%",children:(0,e.jsx)(Pe.default,{onSelectDataset:function(L){var D;console.log("Dataset selected:",L),E("".concat(L.key,":").concat(L.version)),U([ke()(ke()({},L),{},{uniqueKey:"".concat(L.key,":").concat(L.version),license:(D=L.license)!==null&&D!==void 0?D:null})]),ae(!1)},style:{height:"calc(100vh - 200px)",overflow:"auto"},defaultSelectedDataset:K[0]})})]})}},84910:function(){},2921:function(fr,at,f){"use strict";f.r(at),f.d(at,{default:function(){return Ft}});var Zt=f(19632),c=f.n(Zt),pt=f(5574),m=f.n(pt),G=f(67294),v=f(26058),xt=f(2453),ke=f(84567),we=f(21931),u=f(66309),Pe=f(83062),Ue=f(83622),ot=f(85418),st=f(2487),Qe=f(50136),ht=f(71230),ut=f(15746),Se=f(55102),Me=f(95012),le=f(28248),it=f(83170),Ye=f(9448),mt=f(95590),qe=f(4e3),Lt=f(40717),tt=f(88360),Bt=f(18494),Tt=f(53682),Pt=f(17044),vt=f(29965),Xt=f(61086),rt=f(84702),e=f(23315),ie=f(94272),Re=f(81249),Ze=f.n(Re),xe=f(74061),Te=f(79559),h=f(85893),de=v.Z.Sider,jt=function(ct,We,bt,wt,Qt){return{key:We,icon:bt,children:wt,label:ct,type:Qt}},At=function(ct,We,bt){bt?bt(ct):ie.history.push("/datatable/".concat(ct.key,"?version=").concat(We!=null?We:ct.version))},Vr=function(ct){var We=ct.onSelectDataset,bt=ct.style,wt=ct.defaultSelectedDataset,Qt=(0,G.useState)({records:[],total:0,page:1,page_size:10}),hr=m()(Qt,2),It=hr[0],Ur=hr[1],Yt=(0,G.useState)({organization:[],disease:[],organ:[]}),mr=m()(Yt,2),qt=mr[0],Wr=mr[1],vr=(0,G.useState)([]),_t=m()(vr,2),dt=_t[0],Hr=_t[1],$t=(0,G.useState)("All"),gr=m()($t,2),ze=gr[0],Kr=gr[1],er=(0,G.useState)({}),Gt=m()(er,2),_e=Gt[0],Jr=Gt[1],yr=(0,G.useState)({}),Ot=m()(yr,2),Sr=Ot[0],Xr=Ot[1],Ct=(0,G.useState)(""),xr=m()(Ct,2),jr=xr[0],Qr=xr[1],Yr=(0,G.useState)(!1),Et=m()(Yr,2),tr=Et[0],Mt=Et[1],br=(0,G.useState)(null),rr=m()(br,2),wr=rr[0],nr=rr[1],vn=(0,G.useState)(""),Cr=m()(vn,2),kr=Cr[0],Nt=Cr[1],qr=(0,G.useState)("total"),Pr=m()(qr,2),ar=Pr[0],Er=Pr[1],_r=(0,G.useState)({name:"desc",total:"desc"}),Nr=m()(_r,2),gt=Nr[0],Dr=Nr[1],en=(0,G.useState)(!1),Zr=m()(en,2),tn=Zr[0],Lr=Zr[1],Tr=(0,G.useState)(wt||null),Ar=m()(Tr,2),nt=Ar[0],Vt=Ar[1],Ir=(0,G.useState)(800),Or=m()(Ir,2),rn=Or[0],nn=Or[1],an=(0,G.useState)(!1),Mr=m()(an,2),yt=Mr[0],Rr=Mr[1],sr=(0,G.useState)(!1),zr=m()(sr,2),ir=zr[0],lr=zr[1],Rt=(0,G.useRef)(null),kt=(0,G.useRef)(null),Ut=(0,G.useRef)({}),sn=(0,G.useRef)({});(0,G.useEffect)(function(){var fe=function(){var re=window.innerWidth<=768;if(Rr(re),Rt.current){var je=We?0:73,$e=Rt.current.clientHeight-je;nn(Math.max(400,$e))}};return fe(),window.addEventListener("resize",fe),function(){return window.removeEventListener("resize",fe)}},[]),(0,G.useEffect)(function(){Lr(!0),(0,it.getDatasets)({page:1,page_size:1e5}).then(function(fe){var pe={};fe.records.forEach(function($e){$e.version&&(pe[$e.key]=Ze().rsort(Array.from(new Set([].concat(c()(pe[$e.key]||[]),[$e.version])))))}),Xr(pe);var re=fe.records.reduce(function($e,H){return(!$e[H.key]||Ze().gt(H.version,$e[H.key].version))&&($e[H.key]=H),$e},{}),je=Object.values(re);Ur({records:je,total:je.length,page:1,page_size:10}),Lr(!1)}).catch(function(fe){fe.handled||xt.ZP.error(fe.message)}).finally(function(){Lr(!1)})},[]),(0,G.useEffect)(function(){var fe=c()(new Set(It.records.flatMap(function(re){return re.tags}))).sort();Wr({organization:fe.filter(function(re){return re.startsWith("org:")}).concat(fe.filter(function(re){return!re.startsWith("org:")&&!re.startsWith("disease:")&&!re.startsWith("organ:")})),disease:fe.filter(function(re){return re.startsWith("disease:")}),organ:fe.filter(function(re){return re.startsWith("organ:")})});var pe={};It.records.forEach(function(re){re.tags.length>0?re.tags.forEach(function(je){pe[je]=[].concat(c()(pe[je]||[]),[re])}):pe["No tags"]=[].concat(c()(pe["No tags"]||[]),[re])}),pe.All=It.records,Jr(pe)},[It]);var ln=(0,G.useCallback)(function(fe,pe,re,je){var $e;if(!_e[fe])return[];var H=($e=_e[fe])===null||$e===void 0?void 0:$e.filter(function(me){return pe===""||me.name.toLowerCase().includes(pe.toLowerCase())});return(H==null?void 0:H.sort(function(me,Le){return re==="name"?je==="asc"?me.name.localeCompare(Le.name):Le.name.localeCompare(me.name):re==="total"?je==="asc"?me.total-Le.total:Le.total-me.total:0}))||[]},[_e]);(0,G.useEffect)(function(){var fe=ln(ze,jr,ar,gt[ar]);Hr(fe),kt.current&&kt.current.scrollToItem(0)},[_e,ze,jr,ar,gt,ln]),(0,G.useEffect)(function(){if(wt&&dt.length>0&&kt.current){var fe=dt.findIndex(function(pe){return pe.key===wt.key&&pe.version===wt.version});fe!==-1&&setTimeout(function(){var pe;(pe=kt.current)===null||pe===void 0||pe.scrollToItem(fe,"center")},100)}},[wt,dt]);var on=function(pe){Qr(pe)},or=function(){Mt(!1)},Br=(0,G.useCallback)(function(fe){var pe,re,je=fe.index,$e=fe.style,H=dt[je];return H?(0,h.jsx)("div",{style:$e,ref:function(Le){Le&&(sn.current[H.key]=Le,setTimeout(function(){if(Le&&Le.offsetHeight){var Fr=Le.offsetHeight;if(Ut.current[H.key]!==Fr){var ur;Ut.current[H.key]=Fr,(ur=kt.current)===null||ur===void 0||ur.resetAfterIndex(je)}}},0))},children:yt?(0,h.jsxs)("div",{className:"dataset-item mobile-layout",style:{padding:"16px",border:"1px solid #e8e8e8",borderRadius:"8px",margin:"8px",backgroundColor:"#fff",display:"flex",flexDirection:"column"},children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",height:"24px",marginBottom:"8px"},children:[(0,h.jsx)(ke.Z,{checked:(nt==null?void 0:nt.key)===H.key,onChange:function(Le){Le.target.checked?Vt(H):Vt(null)},style:{marginRight:8}}),(0,h.jsx)(we.Z.Text,{style:{fontSize:"16px",fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:H.name})]}),(0,h.jsx)("div",{style:{height:"28px",marginBottom:"8px",overflow:"hidden"},children:H.groups.length>0&&H.groups.map(function(me){return(0,h.jsx)(u.Z,{style:{fontSize:8,marginRight:4},children:me},me)})}),(0,h.jsx)("div",{style:{height:"42px",marginBottom:"8px",overflow:"hidden"},children:(0,h.jsx)(Pe.Z,{title:(0,h.jsx)("p",{dangerouslySetInnerHTML:{__html:H.description}}),classNames:{root:"dataset-description-tooltip"},children:(0,h.jsx)("p",{className:"dataset-description-text",style:{color:"#666",fontSize:"14px",lineHeight:"1.5em",margin:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:H.description}})})}),(0,h.jsxs)("div",{style:{fontSize:"12px",color:"#999",height:"18px",marginBottom:"8px"},children:[H.total," ",H.is_filebased?"files":"samples"]}),(0,h.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",borderTop:"1px solid #f0f0f0",paddingTop:"12px",alignItems:"flex-start"},children:[(0,h.jsx)(Ue.ZP,{size:"small",icon:(0,h.jsx)(Ye.Z,{}),disabled:!H.pmid,style:{fontSize:"12px"},onClick:function(){return window.open("https://pubmed.ncbi.nlm.nih.gov/".concat(H.pmid),"_blank")},children:"Cite"}),(0,h.jsx)(Pe.Z,{title:"Coming soon...",children:(0,h.jsx)(Ue.ZP,{size:"small",icon:(0,h.jsx)(mt.Z,{}),disabled:!0,style:{fontSize:"12px"},onClick:function(){Mt(!0),nr((0,h.jsxs)("span",{children:["Dataset Info for ",(0,h.jsx)(u.Z,{style:{fontSize:16},children:H.name})]})),Nt(H.description)},children:"Info"})}),(0,h.jsx)(Ue.ZP,{size:"small",icon:(0,h.jsx)(Ye.Z,{}),style:{fontSize:"12px"},onClick:function(){Mt(!0),nr((0,h.jsxs)("span",{children:["Dataset License for ",(0,h.jsx)(u.Z,{style:{fontSize:16},children:H.name})]})),(0,it.getDatasetLicense)({key:H.key,version:H.version}).then(function(Le){Nt(Le)}).catch(function(Le){Nt(`No license found.

Please contact the administrator for more information.`)})},children:"License"}),(0,h.jsx)(ot.Z,{menu:{items:(pe=Sr[H.key])===null||pe===void 0?void 0:pe.map(function(me){return{key:me,label:me,onClick:function(){At(H,me,We)}}})},children:(0,h.jsx)(Ue.ZP,{size:"small",icon:(0,h.jsx)(qe.Z,{}),style:{fontSize:"12px"},onClick:function(){At(H,void 0,We)},children:We?"Select":"Visualize"})})]})]}):(0,h.jsxs)(st.Z.Item,{className:"dataset-item",actions:[(0,h.jsx)(Ue.ZP,{type:"link",icon:(0,h.jsx)(Ye.Z,{}),disabled:!H.pmid,onClick:function(){return window.open("https://pubmed.ncbi.nlm.nih.gov/".concat(H.pmid),"_blank")},children:"Cite"}),(0,h.jsx)(Pe.Z,{title:"Coming soon...",children:(0,h.jsx)(Ue.ZP,{type:"link",icon:(0,h.jsx)(mt.Z,{}),disabled:!0,onClick:function(){Mt(!0),nr((0,h.jsxs)("span",{children:["Dataset Info for ",(0,h.jsx)(u.Z,{style:{fontSize:16},children:H.name})]})),Nt(H.description)},children:"Info"})}),(0,h.jsx)(Ue.ZP,{type:"link",icon:(0,h.jsx)(Ye.Z,{}),onClick:function(){Mt(!0),nr((0,h.jsxs)("span",{children:["Dataset License for ",(0,h.jsx)(u.Z,{style:{fontSize:16},children:H.name})]})),(0,it.getDatasetLicense)({key:H.key,version:H.version}).then(function(Le){Nt(Le)}).catch(function(Le){Nt(`No license found.

Please contact the administrator for more information.`)})},children:"License"}),(0,h.jsx)(ot.Z,{menu:{items:(re=Sr[H.key])===null||re===void 0?void 0:re.map(function(me){return{key:me,label:me,onClick:function(){At(H,me,We)}}})},children:(0,h.jsx)(Ue.ZP,{type:"link",icon:(0,h.jsx)(qe.Z,{}),onClick:function(){At(H,void 0,We)},children:We?"Select":"Visualize"})})],children:[(0,h.jsx)(st.Z.Item.Meta,{title:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ke.Z,{checked:(nt==null?void 0:nt.key)===H.key,onChange:function(Le){Le.target.checked?Vt(H):Vt(null)},style:{marginRight:8}}),(0,h.jsx)(we.Z.Text,{children:H.name})]}),description:(0,h.jsxs)("div",{className:"dataset-description",children:[H.groups.length>0&&(0,h.jsx)("span",{children:H.groups.map(function(me){return(0,h.jsx)(u.Z,{style:{fontSize:8},children:me},me)})}),(0,h.jsx)(Pe.Z,{title:(0,h.jsx)("p",{dangerouslySetInnerHTML:{__html:H.description}}),classNames:{root:"dataset-description-tooltip"},children:(0,h.jsx)("p",{className:"dataset-description-text",dangerouslySetInnerHTML:{__html:H.description}})})]})}),(0,h.jsxs)("div",{className:"sample-file-count",children:[H.total," ",H.is_filebased?"files":"samples"]})]})}):null},[dt,nt,tr,kr,wr,yt]),Wt=function(){var pe;return(0,h.jsxs)(Qe.Z,{mode:"inline",selectedKeys:[ze],onClick:function(je){Kr(je.key),yt&&lr(!1)},defaultOpenKeys:["organization","disease","organ"],children:[(0,h.jsxs)(Qe.Z.Item,{children:[(0,h.jsx)("span",{className:"tag-name",children:"All"}),(0,h.jsx)(u.Z,{className:"tag-count",children:It.records.length})]},"All"),(0,h.jsxs)(Qe.Z.Item,{children:[(0,h.jsx)("span",{className:"tag-name",children:"No tags"}),(0,h.jsx)(u.Z,{className:"tag-count",children:((pe=_e["No tags"])===null||pe===void 0?void 0:pe.length)||0})]},"No tags"),(0,h.jsx)(Qe.Z.SubMenu,{title:"Organization",icon:(0,h.jsx)(Lt.Z,{}),children:qt.organization.map(function(re){var je;return(0,h.jsxs)(Qe.Z.Item,{icon:(0,h.jsx)(Lt.Z,{}),children:[(0,h.jsx)(Pe.Z,{title:re.replace("org:",""),children:(0,h.jsx)("span",{className:"tag-name",children:re.replace("org:","")})}),(0,h.jsx)(u.Z,{className:"tag-count",children:((je=_e[re])===null||je===void 0?void 0:je.length)||0})]},re)})},"organization"),(0,h.jsx)(Qe.Z.SubMenu,{title:"Disease",icon:(0,h.jsx)(tt.Z,{}),children:qt.disease.map(function(re){var je;return(0,h.jsxs)(Qe.Z.Item,{icon:(0,h.jsx)(tt.Z,{}),children:[(0,h.jsx)(Pe.Z,{title:re.replace("disease:",""),children:(0,h.jsx)("span",{className:"tag-name",children:re.replace("disease:","")})}),(0,h.jsx)(u.Z,{className:"tag-count",children:((je=_e[re])===null||je===void 0?void 0:je.length)||0})]},re)})},"disease"),(0,h.jsx)(Qe.Z.SubMenu,{title:"Organ",icon:(0,h.jsx)(Bt.Z,{}),children:qt.organ.map(function(re){var je;return(0,h.jsxs)(Qe.Z.Item,{icon:(0,h.jsx)(Bt.Z,{}),children:[(0,h.jsx)(Pe.Z,{title:re.replace("organ:",""),children:(0,h.jsx)("span",{className:"tag-name",children:re.replace("organ:","")})}),(0,h.jsx)(u.Z,{className:"tag-count",children:((je=_e[re])===null||je===void 0?void 0:je.length)||0})]},re)})},"organ")]})};return(0,h.jsxs)(ht.Z,{className:"dataset-container",style:bt,children:[(0,h.jsxs)(ut.Z,{className:"dataset-header",span:24,children:[(0,h.jsxs)("div",{className:"dataset-header-title",children:[yt&&(0,h.jsx)(Ue.ZP,{type:"text",icon:(0,h.jsx)(Tt.Z,{}),onClick:function(){return lr(!0)},style:{marginRight:"8px"}}),"Select Datasets for Visualization & Analysis:"]}),(0,h.jsxs)(u.Z,{className:"tag-count",color:"blue",children:[dt.length," Datasets Listed"]}),(0,h.jsxs)("div",{className:"dataset-search",children:[(0,h.jsx)(Ue.ZP,{type:"text",icon:gt.name==="asc"?(0,h.jsx)(Pt.Z,{}):(0,h.jsx)(vt.Z,{}),onClick:function(){Er("name"),Dr({name:gt.name==="asc"?"desc":"asc",total:gt.total})},children:"Sort by Name"}),(0,h.jsx)(Ue.ZP,{type:"text",icon:gt.total==="asc"?(0,h.jsx)(Pt.Z,{}):(0,h.jsx)(vt.Z,{}),onClick:function(){Er("total"),Dr({name:gt.name,total:gt.total==="asc"?"desc":"asc"})},children:"Sort by Count"}),(0,h.jsx)(Se.Z.Search,{placeholder:"Search by dataset name",enterButton:"Search",allowClear:!0,size:"middle",onSearch:on})]})]}),(0,h.jsxs)(ut.Z,{className:"dataset-content",span:24,children:[!yt&&(0,h.jsx)(de,{width:280,className:"dataset-left-sider",children:Wt()}),yt&&(0,h.jsx)(Me.Z,{title:"Filter Datasets",placement:"left",onClose:function(){return lr(!1)},open:ir,styles:{body:{padding:0}},width:280,children:Wt()}),(0,h.jsxs)("div",{className:"dataset-right-sider-container",children:[(0,h.jsx)(Te.Z,{type:"list",rows:6,loading:tn,children:(0,h.jsx)(st.Z,{loading:!1,itemLayout:"horizontal",locale:{emptyText:"No datasets available"},ref:Rt,style:{height:"100%",position:"relative"},renderItem:Br,children:(0,h.jsx)(xe.S_,{ref:kt,height:rn,itemCount:dt.length,itemSize:function(){return yt?240:120},width:"100%",className:"dataset-virtual-list",overscanCount:3,children:Br})})}),!We&&(0,h.jsx)(ht.Z,{className:"dataset-explore-button",children:(0,h.jsx)(Ue.ZP,{type:"primary",size:"large",onClick:function(){nt&&At(nt,void 0,We)},disabled:nt===null,icon:(0,h.jsx)(Xt.Z,{}),children:"Explore Selected Dataset"})})]})]}),(0,h.jsx)(le.Z,{width:yt?"95%":"50%",className:"dataset-info-modal",title:wr,open:tr,onCancel:or,footer:null,children:(0,h.jsx)(we.Z.Text,{style:{fontSize:16},children:(0,h.jsx)(rt.D,{remarkPlugins:[e.Z],children:kr})})})]})},Ft=Vr},83170:function(fr,at,f){"use strict";f.r(at),f.d(at,{fetchDatasetDataWithQueryPlan:function(){return mt},getDataDictionary:function(){return it},getDatafileTables:function(){return Lt},getDatafiles:function(){return Bt},getDatasetData:function(){return Me},getDatasetLicense:function(){return Pt},getDatasetReadme:function(){return Xt},getDatasets:function(){return ut}});var Zt=f(13769),c=f.n(Zt),pt=f(15009),m=f.n(pt),G=f(97857),v=f.n(G),xt=f(99289),ke=f.n(xt),we=f(94272),u=["key","version"],Pe=["key","version"],Ue=["key","version"],ot=["key","version"],st=["key","version"],Qe=["key","version"],ht=["key","version"];function ut(e,ie){return Se.apply(this,arguments)}function Se(){return Se=ke()(m()().mark(function e(ie,Re){return m()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.abrupt("return",(0,we.request)("/api/v1/datasets",v()({method:"GET",params:v()({},ie)},Re||{})));case 1:case"end":return xe.stop()}},e)})),Se.apply(this,arguments)}function Me(e,ie){return le.apply(this,arguments)}function le(){return le=ke()(m()().mark(function e(ie,Re){var Ze,xe,Te;return m()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Ze=ie.key,xe=ie.version,Te=c()(ie,u),de.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(Ze,"/").concat(xe,"/data"),v()({method:"GET",params:v()({},Te)},Re||{})));case 2:case"end":return de.stop()}},e)})),le.apply(this,arguments)}function it(e,ie){return Ye.apply(this,arguments)}function Ye(){return Ye=ke()(m()().mark(function e(ie,Re){var Ze,xe,Te;return m()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Ze=ie.key,xe=ie.version,Te=c()(ie,Pe),de.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(Ze,"/").concat(xe,"/data-dictionary"),v()({method:"GET",params:v()({},Te)},Re||{})));case 2:case"end":return de.stop()}},e)})),Ye.apply(this,arguments)}function mt(e,ie,Re){return qe.apply(this,arguments)}function qe(){return qe=ke()(m()().mark(function e(ie,Re,Ze){var xe,Te,h;return m()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return xe=ie.key,Te=ie.version,h=c()(ie,Ue),jt.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(xe,"/").concat(Te,"/data-with-query-plan"),v()({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},params:v()({},h),data:Re},Ze||{})));case 2:case"end":return jt.stop()}},e)})),qe.apply(this,arguments)}function Lt(e,ie){return tt.apply(this,arguments)}function tt(){return tt=ke()(m()().mark(function e(ie,Re){var Ze,xe,Te;return m()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Ze=ie.key,xe=ie.version,Te=c()(ie,ot),de.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(Ze,"/").concat(xe,"/datafile-tables"),v()({method:"GET",params:v()({},Te)},Re||{})));case 2:case"end":return de.stop()}},e)})),tt.apply(this,arguments)}function Bt(e,ie){return Tt.apply(this,arguments)}function Tt(){return Tt=ke()(m()().mark(function e(ie,Re){var Ze,xe,Te;return m()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Ze=ie.key,xe=ie.version,Te=c()(ie,st),de.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(Ze,"/").concat(xe,"/datafiles"),v()({method:"GET",params:v()({},Te)},Re||{})));case 2:case"end":return de.stop()}},e)})),Tt.apply(this,arguments)}function Pt(e,ie){return vt.apply(this,arguments)}function vt(){return vt=ke()(m()().mark(function e(ie,Re){var Ze,xe,Te;return m()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Ze=ie.key,xe=ie.version,Te=c()(ie,Qe),de.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(Ze,"/").concat(xe,"/license"),v()({method:"GET",params:v()({},Te)},Re||{})));case 2:case"end":return de.stop()}},e)})),vt.apply(this,arguments)}function Xt(e,ie){return rt.apply(this,arguments)}function rt(){return rt=ke()(m()().mark(function e(ie,Re){var Ze,xe,Te;return m()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Ze=ie.key,xe=ie.version,Te=c()(ie,ht),de.abrupt("return",(0,we.request)("/api/v1/datasets/".concat(Ze,"/").concat(xe,"/readme"),v()({method:"GET",params:v()({},Te)},Re||{})));case 2:case"end":return de.stop()}},e)})),rt.apply(this,arguments)}},50025:function(fr,at,f){"use strict";var Zt=f(67294),c=Object.defineProperty,pt=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,v=(we,u,Pe)=>u in we?c(we,u,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):we[u]=Pe,xt=(we,u)=>{for(var Pe in u||(u={}))m.call(u,Pe)&&v(we,Pe,u[Pe]);if(pt)for(var Pe of pt(u))G.call(u,Pe)&&v(we,Pe,u[Pe]);return we};const ke=we=>React.createElement("svg",xt({width:800,height:800,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},we),React.createElement("path",{d:"M10 10H2V2h8ZM4 8h4V4H4ZM30 30h-8v-8h8Zm-6-2h4v-4h-4ZM20 27H8a6 6 0 0 1 0-12v2a4 4 0 0 0 0 8h12ZM24 17v-2a4 4 0 0 0 0-8H12V5h12a6 6 0 0 1 0 12Z"}),React.createElement("path",{d:"M19 11h-6l-3 4 6 6 6-6Z"}),React.createElement("path",{"data-name":"<Transparent Rectangle>",style:{fill:"none"},d:"M0 0h32v32H0z"}));at.Z="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIgdmlld0JveD0iMCAwIDMyIDMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMCAxMEgyVjJoOFpNNCA4aDRWNEg0Wk0zMCAzMGgtOHYtOGg4Wm0tNi0yaDR2LTRoLTRaTTIwIDI3SDhhNiA2IDAgMCAxIDAtMTJ2MmE0IDQgMCAwIDAgMCA4aDEyWk0yNCAxN3YtMmE0IDQgMCAwIDAgMC04SDEyVjVoMTJhNiA2IDAgMCAxIDAgMTJaIi8+PHBhdGggZD0iTTE5IDExaC02bC0zIDQgNiA2IDYtNloiLz48cGF0aCBkYXRhLW5hbWU9IiZsdDtUcmFuc3BhcmVudCBSZWN0YW5nbGUmZ3Q7IiBzdHlsZT0iZmlsbDpub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+PC9zdmc+"},20067:function(){}}]);
